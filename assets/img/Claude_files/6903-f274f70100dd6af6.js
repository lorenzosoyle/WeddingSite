try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6bac9429-1938-465d-8b57-4232c40dcb91",e._sentryDebugIdIdentifier="sentry-dbid-6bac9429-1938-465d-8b57-4232c40dcb91")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6903],{7386:(e,t,s)=>{s.d(t,{Iq:()=>Q,NM:()=>K,M1:()=>ee,NG:()=>et,G:()=>ei});var r=s(42977),i=s(54568),l=s(16253),a=s(15964),n=s(90510),o=s(1385),d=s(12072),c=s(91961),u=s(23661),h=s(4705),x=s(76761),p=s(32987),m=s(37463),g=s(49645),f=s(7620),b=s(62971),v=s(18179),j=s(37076),y=s(21777),w=s(71526),N=s(38583),_=s(77186),A=s(1761),k=s(71473),C=function(e){return e.Generic="generic",e.Csv="csv",e.Excel="excel",e}({});function S(e){let{isOpen:t,setIsOpen:s,fileName:r,fileUuid:l}=e,{data:a,isLoading:n}=function(e){let{fileUuid:t,enabled:s}=e,{activeOrganization:r}=(0,A.YL)(),i=null==r?void 0:r.uuid;return(0,_.Sk)("/api/organizations/".concat(i,"/files/").concat(t,"/content_preview"),{queryKey:[k.aI,{orgUuid:i,fileUuid:t}],enabled:!!r&&s})}({fileUuid:l,enabled:t}),o=null;return o=n?(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(v.Loading,{size:"md"})}):a?a.file_type===C.Csv?(0,i.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,i.jsxs)("div",{className:"bg-bg-100 w-[15rem] h-[12.5rem] rounded-lg border border-border-400 mb-5",children:[(0,i.jsxs)("div",{className:"h-[2.25rem] text-text-100 font-medium border-b border-border-400 px-3 flex items-center",children:[(0,i.jsx)(w.o,{className:"mr-2",size:16}),(0,i.jsx)("div",{children:(0,i.jsx)(b.A,{defaultMessage:"Columns",id:"SUa8mpheAG"})})]}),(0,i.jsx)(y.E,{className:"h-[10.25rem] w-[15rem] pt-3 px-3 pb-1 text-text-200",children:a.column_names.map((e,t)=>(0,i.jsx)("div",{className:"truncate mb-2",children:e},t))})]}),(0,i.jsx)("div",{className:"text-lg text-text-100 mb-2",children:(0,i.jsx)(b.A,{defaultMessage:"{columnCount, plural, one {# column} other {# columns}}, {rowCount, plural, one {# row} other {# rows}}",id:"wvGBF/FvBd",values:{columnCount:a.column_count,rowCount:a.row_count}})}),(0,i.jsxs)("div",{className:"flex items-center text-text-300 text-xs",children:[(0,i.jsx)(N.R,{className:"mr-2",size:12}),(0,i.jsx)("div",{children:(0,i.jsx)(b.A,{defaultMessage:"Claude can analyze CSVs with the Analysis tool.",id:"gtvz8LDd6q"})})]})]}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(b.A,{defaultMessage:"File previews are not supported for this file type",id:"99ghrgx5j8"})}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(b.A,{defaultMessage:"Could not load file preview",id:"ATy/CxAxS4"})}),(0,i.jsx)(j.aF,{isOpen:t,hasCloseButton:!0,title:r,onClose:()=>s(!1),className:"w-[40rem] h-[24rem]",modalSize:"xl",children:o})}var M=s(34098),E=s(36906);let I=e=>{let{file:t,isOpen:s,onClose:r}=e,l=(0,f.useMemo)(()=>(0,M.E)(t),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(j.aF,{modalSize:"xl",isOpen:!!s,onClose:r,hasCloseButton:!0,title:l.title,subtitle:(0,i.jsx)(E.G,{showPDFWarning:"pdf"===t.file_type,metaData:l.metaData}),children:(0,i.jsx)("div",{className:"bg-bg-000 rounded-lg border-0.5 border-border-300 shadow-sm whitespace-pre-wrap break-all text-xs p-4 font-mono",children:t.extracted_content})})})};var L=s(41417),D=s(46760);function T(){let e=(0,r._)(["\n  rounded-md\n  overflow-hidden\n  shadow-[0_4px_32px_hsl(var(--always-black)/30%),_0_0_0_0.5px_hsl(var(--always-black)/25%)]\n"]);return T=function(){return e},e}let z=e=>{let{file:t,isOpen:s,onClose:r}=e,l=(0,D.A)();return(0,i.jsx)(j.I_,{isOpen:!!s,onClose:r,className:"max-w-[40rem] px-3 pb-14 pt-3",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(L.$,{className:"hover:!text-text-100 !ring-border-200 !absolute left-full top-0 ml-1.5 !text-always-white !ring-offset-0",variant:"ghost",size:"icon_sm","aria-label":l.formatMessage({defaultMessage:"Close image preview",id:"gylVBxmE7Z"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},option:"rounded","data-testid":"close-file-preview",children:(0,i.jsx)(x.X,{size:"16"})}),(0,i.jsx)(G,{children:(0,i.jsx)("img",{src:t.preview_asset.url,width:t.preview_asset.image_width,height:t.preview_asset.image_height,onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},alt:l.formatMessage({defaultMessage:"Preview of {fileName}",id:"djtHiJ5aej"},{fileName:t.file_name}),onDragStart:e=>e.preventDefault(),className:"block w-full max-h-[calc(100vh-4rem)]"})}),(0,i.jsx)("div",{style:{textShadow:"0 0 8px hsl(var(--always-black)/25%)"},className:"pt-1.5 text-center text-always-white",children:t.file_name})]})})},G=n.J.div(T());var P=s(23338);function O(e){let{isOpen:t,setIsOpen:s,documentFile:r}=e,l=(0,D.A)();return(0,i.jsx)(j.aF,{isOpen:t,hasCloseButton:!0,title:r.file_name,onClose:()=>s(!1),children:(0,i.jsxs)("a",{className:"self-center group text-center",href:"".concat(r.document_asset.url,"/").concat(r.file_name),target:"_blank",children:[(0,i.jsxs)("div",{className:"w-fit rounded-lg relative m-2 mt-8",children:[(0,i.jsx)("img",{className:"bg-always-white rounded-lg border border-border-300 group-hover:border-accent-secondary-000/70 shadow-sm group-hover:-rotate-1 transition",alt:l.formatMessage({defaultMessage:"{fileName} thumbnail",id:"1bEhiGnHtL"},{fileName:r.file_name}),src:r.thumbnail_asset.url,style:{width:r.thumbnail_asset.image_width/1.5,height:r.thumbnail_asset.image_height/1.5}}),(0,i.jsx)("div",{className:"absolute w-full h-full inset-0 group-hover:bg-gradient-to-t from-accent-secondary-200/5 to-60% group-hover:-rotate-1 transition rounded-lg"}),(0,i.jsx)(e=>{let{pageCount:t}=e;return t<=1?null:(0,i.jsxs)("div",{className:"*:absolute *:w-full *:bg-always-white *:rounded-lg *:group-hover:border-accent-secondary-100/50 *:transition-all *:border *:border-border-300",children:[(0,i.jsx)("div",{className:"h-[98%] ml-1 group-hover:ml-[5px] group-hover:rotate-2 -z-10 shadow-sm top-[1%] opacity-70"}),(0,i.jsx)("div",{className:"h-[96%] ml-2 group-hover:ml-[10px] group-hover:rotate-3 group-hover:top-[2%]  -z-20 shadow top-[2%] opacity-50"})]})},{pageCount:r.document_asset.page_count})]}),(0,i.jsxs)("div",{className:"relative text-center inline-flex items-center justify-center text-pretty gap-2 p-1 text-sm text-text-300 *:transition",children:[(0,i.jsx)("p",{className:"group-hover:opacity-0 group-hover:scale-75",children:(0,i.jsx)(b.A,{defaultMessage:"{count, plural, one {# page} other {# pages}}",id:"RyCW0gT/7M",values:{count:r.document_asset.page_count}})}),(0,i.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 inline-flex items-center justify-center gap-1 text-accent-secondary-000",children:[(0,i.jsx)(P.K,{size:16,weight:"fill",className:"scale-50 group-hover:scale-100 transition-all "}),(0,i.jsx)("p",{children:(0,i.jsx)(b.A,{defaultMessage:"Download",id:"5q3qC0sC3r"})})]})]})]})})}function R(){let e=(0,r._)(["\n  min-w-0\n  h-[18px] \n  flex \n  flex-row \n  items-center \n  justify-center\n  gap-0.5\n  px-1 \n  border-0.5\n  border-border-300/25\n  shadow-sm\n  rounded\n  bg-bg-000/70\n  backdrop-blur-sm\n  font-medium\n"]);return R=function(){return e},e}function F(e){return""===e.file_name||e.file_name.match(/paste(-\d+)?\.txt/)}function U(e){if("file_kind"in e){if(!e.file_name)return;let t=e.file_name.split(".");return t.length>1?t[t.length-1]:void 0}if(F(e))return"pasted";{if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,l.cm)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}let H=e=>{let{handleClick:t,isInSelectionMode:s,handleSelect:r,isSelected:i}=e,[l,a]=(0,f.useState)(!1);return{onClick:()=>{s&&r?r(!i,!1):t?t():a(!0)},isPreviewOpen:l,setIsPreviewOpen:a}},B={icon:{height:28,width:28},normal:{height:120,width:120},stretch:{height:120,width:"100%"}},W=e=>e&&B[e]?B[e]:B.normal,K=e=>{let{file:t,isEditable:s,showWarnings:r,...l}=e;if("file_kind"in t)switch(t.file_kind){case u.M.Image:return(0,i.jsx)(X,{...l,file:t,showWarnings:r,isEditable:s});case u.M.Blob:return(0,i.jsx)(J,{...l,file:t,isEditable:s});case u.M.SanitizedDocument:return(0,i.jsx)(V,{...l,file:t,isEditable:s});case u.M.WiggleVM:return(0,i.jsx)($,{...l,file:t,isEditable:s})}return(0,i.jsx)(q,{...l,file:t,isEditable:s})},X=e=>{let{disabled:t,size:s,file:r,showWarnings:l,handleRemove:a,handleClick:n,isSelected:o,handleSelect:d,isInSelectionMode:c,isEditable:u}=e,{height:h,width:x}=W(s),{onClick:m,isPreviewOpen:g,setIsPreviewOpen:f}=H({handleClick:n,isInSelectionMode:c,handleSelect:d,isSelected:o}),b=l&&(e=>{if(!e.preview_asset)return!1;let{image_width:t,image_height:s}=e.preview_asset;return t<200||s<200})(r);return(0,i.jsxs)("div",{className:"relative group/thumbnail",children:[(0,i.jsxs)("div",{"data-testid":r.file_name,style:{width:x,height:h,minWidth:x,minHeight:h},className:(0,p.A)("rounded-lg overflow-hidden can-focus-within rounded-lg border-0.5 border-border-300/25 hover:border-border-200/50 hover:shadow-always-black/10 shadow-sm shadow-always-black/5",!t&&"cursor-pointer"),children:[(0,i.jsx)(Y,{"data-testid":"file-thumbnail",disabled:t,width:x,height:h,fileName:r.file_name,src:r.preview_asset.url,onClick:m}),(0,i.jsx)(el,{isAbsolute:!0,right:b?(0,i.jsx)(en,{type:"warning",tooltipText:"Attach a higher resolution image for better results"}):void 0,isSelected:o,handleSelect:d,isEditable:u}),(0,i.jsx)(z,{file:r,isOpen:g,onClose:()=>f(!1)})]}),(0,i.jsx)(eo,{disabled:t,handleRemove:a,isEditable:u,isInSelectionMode:c})]})},J=e=>{let{file:t,handleClick:s,...r}=e,{onClick:l,isPreviewOpen:a,setIsPreviewOpen:n}=H({handleClick:s,isInSelectionMode:r.isInSelectionMode,handleSelect:r.handleSelect,isSelected:r.isSelected}),o=U(t);return(0,i.jsxs)("div",{children:[(0,i.jsx)(Q,{...r,"data-testid":t.file_name,title:t.file_name,handleClick:l,tag:!!o&&(0,i.jsx)(ea,{tagName:o,tooltipText:o?"Claude can analyze ".concat(o.toUpperCase()," files with the analysis tool."):"Claude can analyze this file with the Analysis tool."})}),(0,i.jsx)(S,{isOpen:a,setIsOpen:n,fileName:t.file_name,fileUuid:t.file_uuid})]})},q=e=>{let{file:t,handleClick:s,...r}=e,{onClick:l,isPreviewOpen:a,setIsPreviewOpen:n}=H({handleClick:s,isInSelectionMode:r.isInSelectionMode,handleSelect:r.handleSelect,isSelected:r.isSelected}),o=F(t),d=o?"Pasted Text":t.file_name,c=t.extracted_content.split("\n").length,u=(0,i.jsx)(b.A,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:c}}),h=t.extracted_content.substring(0,300),x=U(t);return(0,i.jsxs)("div",{children:[(0,i.jsx)(Q,{...r,"data-testid":t.file_name,...o?{text:h}:{title:d,subtitle:u},handleClick:l,tag:!!x&&(0,i.jsx)(ea,{tagName:x,tooltipText:"pdf"===t.file_type?"PDF converted to text":void 0})}),(0,i.jsx)(I,{file:t,isOpen:a,onClose:()=>n(!1)})]})},V=e=>{let{disabled:t,size:s,file:r,handleRemove:l,handleClick:a,isSelected:n,handleSelect:o,isInSelectionMode:d,isEditable:c}=e,{height:u,width:h}=W(s),{onClick:x,isPreviewOpen:m,setIsPreviewOpen:g}=H({handleClick:a,isInSelectionMode:d,handleSelect:o,isSelected:n}),f=U(r);return(0,i.jsxs)("div",{className:"group/thumbnail relative",children:[(0,i.jsxs)("div",{"data-testid":r.file_name,style:{width:h,height:u,minWidth:h,minHeight:u},className:(0,p.A)("rounded-lg overflow-hidden border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 can-focus-within rounded-lg",!t&&"cursor-pointer hover:border-border-200/50 hover:shadow-always-black/10"),children:[(0,i.jsx)(Y,{disabled:t,width:"100%",height:"100%",fileName:r.file_name,src:r.thumbnail_asset.url,onClick:x}),(0,i.jsx)(el,{isSelected:n,handleSelect:o,isAbsolute:!0,left:f?(0,i.jsx)(ea,{tagName:f}):void 0,isEditable:c}),(0,i.jsx)(O,{isOpen:m,setIsOpen:g,documentFile:r})]}),(0,i.jsx)(eo,{disabled:t,handleRemove:l,isEditable:c,isInSelectionMode:d})]})},$=e=>{let{file:t,...s}=e,r=U(t);return(0,i.jsx)("div",{children:(0,i.jsx)(Q,{...s,"data-testid":t.file_name,title:t.file_name,handleClick:()=>{},tag:!!r&&(0,i.jsx)(ea,{tagName:r})})})},Y=e=>{let{disabled:t,width:s,height:r,fileName:l,src:a,onClick:n}=e,[o,d]=(0,f.useState)(!1);return(0,i.jsx)("button",{className:"relative bg-bg-000",style:{width:s,height:r},disabled:t,onClick:n,children:(0,i.jsx)("img",{className:(0,p.A)("w-full h-full object-cover transition duration-400",o?"opacity-1":"opacity-0 blur-sm"),onLoad:()=>d(!0),alt:l,src:a,onDragStart:e=>e.preventDefault()})})},Q=e=>{let{disabled:t,size:s,handleClick:r,url:l,title:a,subtitle:n,text:o,isLoading:d=!1,tag:c,actions:u,isError:h,handleRemove:x,isEditable:g,isSyncing:f,handleSelect:b,isSelected:v,isInSelectionMode:j}=e,y=!!(r||l),{height:w,width:N}=W(s);return(0,i.jsx)("div",{className:"relative",children:(0,i.jsxs)(m.P.div,{className:"group/thumbnail",whileHover:g||f||j?"actionsVisible":void 0,animate:j||f?"actionsVisible":"initial","data-testid":"file-thumbnail",children:[(0,i.jsxs)(Z,{url:l,handleClick:r,disabled:t,width:N,height:w,isClickable:y,isLoading:d,isError:h,children:[(0,i.jsxs)("div",{className:"relative flex flex-col gap-1 min-h-0",children:[o?(0,i.jsx)("div",{className:"max-w-full overflow-hidden absolute h-[112px] [mask-image:linear-gradient(to_bottom,hsl(var(--always-black)/80%)_0%,_hsl(var(--always-black)/10%)_100%)]",children:(0,i.jsx)(m.P.p,{initial:{opacity:0},animate:{opacity:1},className:"text-[8px] text-text-100 break-words",children:o})}):h||a&&!d?(0,i.jsx)(m.P.h3,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:(0,p.A)("text-[12px] tracking-tighter break-words",h?"text-text-500":"text-text-100",n?"line-clamp-3":"line-clamp-4"),children:a}):(0,i.jsx)(es,{}),!!n&&!d&&!h&&(0,i.jsx)(m.P.p,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:"text-[10px] line-clamp-1 tracking-tighter break-words text-text-500",children:n})]}),d?(0,i.jsx)(er,{}):(0,i.jsx)(el,{isSelected:v,handleSelect:b,left:c,right:h&&(0,i.jsx)(en,{type:"error"}),actions:u,isEditable:g})]}),(0,i.jsx)(eo,{disabled:t,handleRemove:x,isEditable:g,isInSelectionMode:j})]})})},Z=e=>{let{children:t,disabled:s,width:r,height:l,handleClick:a,url:n,isClickable:o,isLoading:d,isError:c}=e;return a?(0,i.jsx)("button",{disabled:s,style:{width:r,height:l,minWidth:r},className:(0,p.A)("rounded-lg text-left block",!s&&"cursor-pointer","font-ui transition-all rounded-lg border-0.5 border-border-300/25 flex flex-col justify-between gap-2.5 overflow-hidden px-2.5 py-2",c?"bg-danger-200/5":d?"bg-bg-100":"bg-bg-000",o&&!d&&!s&&"hover:border-border-200/50 hover:shadow-always-black/10",!d&&"shadow-sm shadow-always-black/5"),onClick:a,children:t}):n?(0,i.jsx)("a",{style:{width:r,height:l,minWidth:r},className:(0,p.A)("rounded-lg text-left block",!s&&"cursor-pointer","font-ui transition-all rounded-lg border-0.5 border-border-300/25 flex flex-col justify-between gap-2.5 overflow-hidden px-2.5 py-2",c?"bg-danger-200/5":d?"bg-bg-100":"bg-bg-000",o&&!d&&!s&&"hover:border-border-200/50 hover:shadow-always-black/10",!d&&"shadow-sm shadow-always-black/5"),href:s?void 0:n,target:"_blank",children:t}):(0,i.jsx)("div",{style:{width:r,height:l,minWidth:r},className:(0,p.A)("rounded-lg text-left block",!s&&"cursor-pointer","font-ui transition-all rounded-lg border-0.5 border-border-300/25 flex flex-col justify-between gap-2.5 overflow-hidden px-2.5 py-2",c?"bg-danger-200/5":d?"bg-bg-100":"bg-bg-000",o&&!d&&!s&&"hover:border-border-200/50 hover:shadow-always-black/10",!d&&"shadow-sm shadow-always-black/5"),children:t})},ee=e=>{let{file:t}=e,s=U(t);return(0,i.jsx)("div",{className:"w-[38px] h-[38px] min-w-[38px] font-ui rounded-lg border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 flex items-center justify-center overflow-hidden bg-bg-000",children:!!s&&(0,i.jsx)("p",{className:"font-bold uppercase font-ui text-text-300 text-[9px] tracking-tighter pt-0.5",children:s})})},et=e=>{let{size:t,tag:s,isShown:r=!0}=e,{width:l}=W(t);return(0,i.jsx)(g.N,{children:!!r&&(0,i.jsx)(m.P.div,{initial:{opacity:0,maxWidth:0},animate:{opacity:1,maxWidth:l},children:(0,i.jsx)(Q,{isLoading:!0,tag:s,size:t})})})},es=()=>(0,i.jsxs)(m.P.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full flex flex-col",children:[(0,i.jsx)(o.j,{width:"100%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"}),(0,i.jsx)(o.j,{width:"66%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})]}),er=()=>(0,i.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},children:(0,i.jsx)(o.j,{width:"48px",height:"18px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})}),ei=n.J.div(R()),el=e=>{let{isAbsolute:t=!1,left:s,right:r,actions:l,handleSelect:n,isSelected:o,isEditable:d}=e,c=!!s,u=!!r||!!n;return c||u?(0,i.jsx)("div",{className:(0,p.A)(t&&"absolute bottom-2 left-0 right-0 px-2.5 overflow-x-hidden overflow-y-visible"),children:(0,i.jsxs)("div",{className:(0,p.A)("relative flex flex-row items-center gap-1",u&&!c?"justify-end":"justify-between"),children:[c&&(0,i.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-row gap-1 shrink min-w-0",children:s}),u&&(0,i.jsxs)("div",{className:"flex flex-row gap-1 shrink-0",children:[r,!!n&&!!d&&(0,i.jsxs)(m.P.div,{variants:{actionsVisible:{opacity:1,position:"relative"},initial:{opacity:0,position:"absolute"}},className:"flex flex-row gap-1 h-[18px] right-0 top-0",onClick:e=>e.stopPropagation(),transition:{ease:"easeOut",duration:.2},children:[l,(0,i.jsx)(a.Sc,{checked:o,onChange:n,label:"Select file",hideLabel:!0,className:(0,p.A)("!w-[18px] !h-[18px] !border-0.5 !border-border-300/25 !shadow-sm !rounded"),size:12})]})]})]})}):null},ea=e=>{let{tagName:t,tooltipText:s,className:r}=e,l=(0,i.jsx)(ei,{className:r,children:(0,i.jsx)("p",{className:"uppercase truncate font-ui text-text-300 text-[11px] leading-[13px]",children:t})});return s?(0,i.jsx)(d.Tooltip,{tooltipContent:s,children:l}):l},en=e=>{let{type:t,tooltipText:s,className:r}=e,l=(0,i.jsx)(ei,{className:(0,p.A)("shrink-0","error"===t?"text-danger-000 border-danger-200/50 bg-danger-900":"text-warning-orange border-warning-orange/50 bg-bg-000/70",r),children:(0,i.jsx)(h.N,{size:12})});return s?(0,i.jsx)(d.Tooltip,{tooltipContent:s,children:l}):l},eo=e=>{let{disabled:t,handleRemove:s,isEditable:r,isInSelectionMode:l}=e;return!s||!r||l||t?null:(0,i.jsx)(d.Tooltip,{tooltipContent:(0,i.jsx)(b.A,{defaultMessage:"Remove",id:"G/yZLul6P1"}),side:"bottom",children:(0,i.jsx)("button",{className:(0,p.A)("transition-all hover:bg-bg-000/50 text-text-500 hover:text-text-200 group-focus-within/thumbnail:opacity-100 group-hover/thumbnail:opacity-100 opacity-0 w-5 h-5 absolute -top-2 -left-2 rounded-full border-0.5 border-border-300/25 bg-bg-000/90 backdrop-blur-sm flex items-center justify-center",(0,c.Fr)()&&"!opacity-100 !bg-bg-000/50"),onClick:e=>{e.stopPropagation(),e.preventDefault(),s()},children:(0,i.jsx)(x.X,{size:12,weight:"bold"})})})}},15957:(e,t,s)=>{s.d(t,{X:()=>x,n:()=>h});var r=s(54568),i=s(1761),l=s(12072),a=s(38583),n=s(46760),o=s(62971),d=s(81527),c=s(60629);let u=e=>{let{intl:t}=e;return(0,r.jsx)(l.Tooltip,{tooltipContent:t.formatMessage({defaultMessage:"Claude will guide your learning process instead of just giving answers. You can adjust these instructions in the project anytime.",id:"X9ioIsDrqe"}),side:"right",align:"end",children:(0,r.jsx)(a.R,{size:16,className:"shrink-0"})})},h=(e,t)=>{let s=(0,i.mV)(),l=(0,n.A)(),a=(0,c.AI)();e=null!=e?e:null==a?void 0:a.type,t=null!=t?t:null==a?void 0:a.subtype;let h={};return s&&(h.createProjectTitle=l.formatMessage({defaultMessage:"Create a project",id:"HR5A+UPiIu"})),e===d.gM.Student&&(t===d.gr.Study&&(h.createProjectTitle=l.formatMessage({defaultMessage:"Create a study project",id:"aM+8eAE0xv"}),h.createProjectNameLabel=(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)(o.A,{defaultMessage:"What course are you studying?",id:"v36OurBGgA"}),(0,r.jsx)(u,{intl:l})]}),h.createProjectDescriptionDefault=l.formatMessage({defaultMessage:"A project for studying your course materials, where Claude helps visualize key concepts, build comprehensive study guides, and tutor you according to your learning needs.",id:"KXxo+Xoski"})),t===d.gr.Career&&(h.createProjectTitle=l.formatMessage({defaultMessage:"Create a career project",id:"so02zrH0dG"}),h.createProjectNameLabel=l.formatMessage({defaultMessage:"What are you working towards?",id:"lqTAz2gpwu"}),h.createProjectDescriptionDefault=l.formatMessage({defaultMessage:"A project for exploring career opportunities, where Claude helps match your skills to potential careers, improve your resume, and develop personalized roadmaps for professional growth.",id:"JlrkubQL9D"})),t===d.gr.Research&&(h.createProjectTitle=l.formatMessage({defaultMessage:"Create a research project",id:"L9PkdSYTu+"}),h.createProjectNameLabel=l.formatMessage({defaultMessage:"What are you researching?",id:"gsRiHcI+J7"}),h.createProjectDescriptionDefault=l.formatMessage({defaultMessage:"A project for developing academic research, where Claude helps identify key themes in your research, create structured outlines, and provide feedback to improve your drafts.",id:"WI7ROAQaAW"}))),h},x=e=>{let t=(0,n.A)();if(!e)return{};let s=e.type,r=e.subtype,i={};return s===d.gM.Beam&&(i.projectKnowledgeTitle=t.formatMessage({defaultMessage:"Knowledge",id:"5OteMImbhA"}),i.projectKnowledgeAddButtonText=t.formatMessage({defaultMessage:"Set instructions",id:"aUwW4lb/2O"})),s===d.gM.Student&&(i.projectKnowledgeTitle=t.formatMessage({defaultMessage:"Reference materials",id:"IAK8rLiiAO"}),i.projectNoChatsMessage=t.formatMessage({defaultMessage:"Start a chat to keep conversations organized and re-use reference materials.",id:"ShAr8vcP2v"}),i.projectNoKnowledgeCantAddMessage=t.formatMessage({defaultMessage:"No reference materials added yet.",id:"2Gz7oaDTj0"}),i.projectKnowledgeDragDropMessage=t.formatMessage({defaultMessage:"Drop files here to add to reference materials",id:"hNUGHHYeEK"}),r===d.gr.Study&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop course materials like syllabi, lecture notes, or text-book excerpts so Claude can help you learn.",id:"hlIot3aXce"})),r===d.gr.Career&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop career materials like your resume, cover letters, or job descriptions to help Claude provide personalized professional advice.",id:"LXnjolwaEB"})),r===d.gr.Research&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop research materials like draft papers, source notes, or literature reviews to help Claude provide targeted academic guidance.",id:"c5oBAmpUAc"}))),i}},21777:(e,t,s)=>{s.d(t,{E:()=>d});var r=s(42977),i=s(54568),l=s(79428),a=s(90510),n=s(7620);function o(){let e=(0,r._)(["",""]);return o=function(){return e},e}let d=e=>{let{hideBottomShadow:t,scrollContainerRef:s,persistedScrollToRef:r,...l}=e,a=(null==r?void 0:r.current)!==void 0,o=(0,n.useRef)(null),d=s||o,u=(0,n.useCallback)(()=>{let e=d.current;if(e&&!t){let{scrollTop:t,offsetHeight:s,scrollHeight:i}=e;t+s>=i?e.classList.remove("has-bottom-scroll"):e.classList.add("has-bottom-scroll"),a&&0!==t&&Math.abs(t-r.current)>10&&(r.current=t)}},[t,d,a,r]);return u(),(0,n.useEffect)(()=>{let e=d.current;requestAnimationFrame(()=>{a&&e&&(null==e||e.scrollTo({top:r.current,behavior:"instant"}))})},[d,a,r]),(0,n.useEffect)(()=>{let e=d.current;return null==e||e.addEventListener("scroll",u),()=>null==e?void 0:e.removeEventListener("scroll",u)},[u,d]),(0,i.jsx)(c,{ref:d,...l,children:l.children})},c=a.J.div(o(),l.M)},31102:(e,t,s)=>{s.d(t,{J:()=>i});var r=s(29585);function i(e){let t="Unable to add Google Doc.";return e instanceof r.LG&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},33395:(e,t,s)=>{s.d(t,{$:()=>a});var r=s(54568),i=s(4705),l=s(32987);let a=e=>{let{icon:t,title:s,subtitles:a,tag:n,disabled:o,url:d,isError:c,handleClick:u}=e,h=(0,l.A)("flex flex-row gap-4 items-center justify-between rounded-md tracking-tight shrink-0 h-[2rem] px-1 w-full min-w-0",!o&&(u||d)?"cursor-pointer hover:bg-bg-100":"cursor-default"),x=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(!!t||c)&&(0,r.jsx)("div",{className:"h-5 w-5 flex items-center justify-center shrink-0",children:c?(0,r.jsx)(i.N,{size:12,className:"text-danger-000"}):t}),(0,r.jsx)("p",{className:(0,l.A)("relative bottom-[1px] text-[0.875rem] whitespace-nowrap overflow-hidden text-ellipsis shrink",c?"text-text-500":"text-text-000"),children:s}),!!(null==a?void 0:a.length)&&a.map((e,t)=>(0,r.jsx)("p",{className:"relative bottom-[1px] text-[0.75rem] text-text-500 line-clamp-1 shrink-0",children:e},t))]}),!!n&&(0,r.jsx)("div",{className:"shrink-0 flex items-center",children:(0,r.jsx)("div",{className:"text-[0.625rem] text-text-300 border-border-400 border-0.5 rounded px-1 h-[1.125rem] inline-flex items-center justify-center uppercase font-medium shrink-0",children:n})})]});return d?(0,r.jsx)("a",{target:"_blank",href:o?void 0:d,tabIndex:-1,children:(0,r.jsx)("button",{disabled:o,className:h,onClick:u,children:x})}):u?(0,r.jsx)("button",{disabled:o,className:h,onClick:u,children:x}):(0,r.jsx)("div",{className:h,children:x})}},34098:(e,t,s)=>{s.d(t,{E:()=>l});var r=s(54568),i=s(62971);function l(e){return{title:(()=>{if("html"===e.file_type){let t=e.extracted_content.match(/<title>(.*?)<\/title>/);return t?t[1]:e.file_name}return"paste.txt"===e.file_name?(0,r.jsx)(i.A,{defaultMessage:"Pasted content",id:"okKwHjIO0b"}):e.file_name})(),metaData:(()=>{var t;let s=(0,r.jsx)(i.A,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:e.extracted_content.split("\n").length}}),l=(t=e.file_size)<1048576?(0,r.jsx)(i.A,{defaultMessage:"{size} KB",id:"/hgypvsrtJ",description:"File size in kilobytes",values:{size:(t/1024).toFixed(2)}}):(0,r.jsx)(i.A,{defaultMessage:"{size} MB",id:"8amcCGO7ya",description:"File size in megabytes",values:{size:(t/1048576).toFixed(2)}});if("html"!==e.file_type)return(0,r.jsxs)("span",{children:[l,"\xa0",(0,r.jsx)("span",{className:"opacity-50 mx-1",children:"•"}),s]});{let t=e.file_name,i=e.file_name.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\\/\n?]+)/gim);return i&&(t=i[0].replace("www.","")),(0,r.jsxs)("span",{children:[s,"\xa0",(0,r.jsx)("span",{className:"opacity-50 mx-1",children:"•"}),t]})}})()}}},34281:(e,t,s)=>{s.d(t,{v:()=>n});var r=s(77101),i=s(85717),l=s(57934),a=s(45715);let n=()=>{let{initGithubAuth:e}=(0,l.nB)(),{initDriveAuth:t}=(0,i.cI)();return s=>{s===r.v8.GITHUB?e():s===r.v8.GDRIVE?t():s===r.v8.OUTLINE&&(0,a.so)()}}},35368:(e,t,s)=>{s.d(t,{A6:()=>o,Wi:()=>d});var r=s(75006),i=s(27062),l=s(85544);let a=[],n=[];function o(){let e=d(),t=(0,i.T9)("frontend_fallback_paprika_config","modes",n,c);return e.length>0?e:t}function d(){return(0,i.T9)("paprika_config","modes",a,c)}let c=r.z.array(r.z.object({id:r.z.string(),title:r.z.string(),description:r.z.string(),description_key:r.z.string().optional(),paprika_mode_value:l.T4.optional()}))},35391:(e,t,s)=>{s.d(t,{S:()=>i,d:()=>r});let r=e=>"https://docs.google.com/document/d/".concat(e),i=e=>"https://outline.ant.dev/doc/".concat(e)},35747:(e,t,s)=>{s.d(t,{J:()=>d,j:()=>o});var r=s(85644),i=s(55554),l=s(85544),a=s(35368),n=s(21036);let o=()=>{let{allModelOptions:e}=(0,r.A9)();return t=>{var s;let r=e.find(e=>e.model===t);return!!(null==r||null==(s=r.paprika_modes)?void 0:s.includes("extended"))}},d=()=>{let e=(0,a.A6)(),{selectedTier:t,isTierSelectorEnabled:s,shouldOverrideFeatureAccess:r}=(0,i.t)(),o=(0,n.useLayer)("trials_freemium");return s&&r&&t?t===l.d7.PRO||t===l.d7.MAX||t===l.d7.ENTERPRISE||t===l.d7.FREE&&o.get("free_thinking",!1):!!e.length}},36906:(e,t,s)=>{s.d(t,{G:()=>l});var r=s(54568),i=s(62971);function l(e){let{showPDFWarning:t=!1,metaData:s}=e;return(0,r.jsxs)("span",{className:"text-text-500 mb-3 mt-0.5 flex flex-wrap gap-y-2 items-start items-center text-xs",children:[(0,r.jsx)("span",{children:s}),(0,r.jsx)("span",{className:"mx-1.5 opacity-50 hidden lg:inline",children:"•"}),t?(0,r.jsx)("span",{children:(0,r.jsx)(i.A,{defaultMessage:"This PDF was converted to text due to its large size",id:"o/G2cAuU9n"})}):(0,r.jsx)("span",{children:(0,r.jsx)(i.A,{defaultMessage:"Formatting may be inconsistent from source",id:"9NeTb00/cM"})})]})}},43156:(e,t,s)=>{s.d(t,{Eu:()=>g,WJ:()=>x,YW:()=>p,be:()=>h,fy:()=>m});var r=s(85644),i=s(1761),l=s(55554),a=s(27062),n=s(85544),o=s(92075),d=s(81527),c=s(57383);let u=!s(40459).env.NEXT_PUBLIC_DISABLE_WEB_SEARCH,h=()=>{let{value:e}=(0,a.fS)("claudeai_web_search"),{selectedTier:t,isTierSelectorEnabled:s,shouldOverrideFeatureAccess:r}=(0,l.t)();return s&&r&&t?t===n.d7.PRO||t===n.d7.MAX||t===n.d7.ENTERPRISE:e&&u},x=()=>{var e;let t=(0,i.mV)(),{data:s}=(0,o.rX)(),r=!!s&&!(null==(e=s.disabled_features)?void 0:e.includes("web_search"));return u&&(!t||r)},p=()=>{let e=h(),t=x();return e&&t},m=e=>{var t,s,r;let l=x(),{account:n}=(0,i.YL)(),o=(()=>{let{value:e}=(0,a.fS)("claudeai_web_search_default_on");return e&&u})(),{projectUuid:h}=(0,c.oM)(),{data:p}=(0,d.xQ)(h),{value:m}=(0,a.fS)("claude_ai_sticky_project_settings");if(!l)return!1;let g=o?(null==n||null==(t=n.settings)?void 0:t.enabled_web_search)!==!1:!!(null==n||null==(s=n.settings)?void 0:s.enabled_web_search);return e?!!(null==e||null==(r=e.conversationSettings)?void 0:r.enabled_web_search):h&&m?!!(null==p?void 0:p.enabled_web_search):g},g=e=>{let t=(0,r.Wq)()(e,"web_search");return u&&t}},48676:(e,t,s)=>{s.d(t,{$:()=>a,X:()=>n});let r=/docs\.google\.com\/document\/d\/([a-zA-Z0-9-_]+)/i,i=/document\/d\/([a-zA-Z0-9-_]+)/i,l=/(docs\.google\.com)|(drive\.google\.com)/i;function a(e){if(!e)return null;try{let t=new URL(e),s=!!t.toString().match(r),l=t.pathname.match(i);if(s&&l&&l[1])return l[1]}catch(e){}return null}function n(e){if(!e)return!1;try{return!!new URL(e).toString().match(l)}catch(e){}return!1}},53573:(e,t,s)=>{s.d(t,{D:()=>h});var r=s(78217),i=s(9896),l=s(1761),a=s(55554),n=s(27062),o=s(85544),d=s(56147);let c={raven:{hardLimit:19e4,output:16384},pro:{hardLimit:19e4,output:8192},max:{hardLimit:19e4,output:16384},free:{hardLimit:30500,output:8192}},u={default:c},h=(e,t)=>{let s=(0,r.Z3)(e),{stickyModelPreference:h}=(0,i.F)();return(e=>{var t,s,r,i,h,x;let p,m=(0,l.mV)(),g=(0,l.O9)(),f=(0,l.zc)(),{selectedTier:b,shouldOverrideTokenLimits:v,isTierSelectorEnabled:j}=(0,a.t)(),y=j&&v&&!!b,w=(0,n.iW)("hatch_token_limits",u,d.RP),N=null!=(s=null!=(t=w[e])?t:w.default)?s:c;return null!=(p=(y?b===o.d7.MAX:f)?null==N||null==(r=N.max)?void 0:r.hardLimit:(y?b===o.d7.ENTERPRISE:m)?null==N||null==(i=N.raven)?void 0:i.hardLimit:(y?b===o.d7.PRO:g)?null==N||null==(h=N.pro)?void 0:h.hardLimit:null==N||null==(x=N.free)?void 0:x.hardLimit)?p:30500})(e?s:t||h||s)}},60885:(e,t,s)=>{s.d(t,{s:()=>eo});var r=s(54568),i=s(37076),l=s(46612),a=s(77101),n=s(7620),o=s(89836),d=s(52909),c=s(56147),u=s(53573),h=s(34059),x=s(41417),p=s(91926),m=s(18179),g=s(12072),f=s(29585),b=s(69751),v=s(69055),j=s(99272),y=s(55956),w=s(10654),N=s(73325),_=s(76761),A=s(65400),k=s(4705),C=s(84713),S=s(14985),M=s(32987),E=s(49645),I=s(37463),L=s(92012),D=s.n(L),T=s(27261),z=s.n(T),G=s(93709),P=s(62971),O=s(46760),R=s(57934);function F(e,t){if(!t.startsWith("/"))throw Error("absolute path required");let s=t;for(;null!==s;){let t=e[s];if("include"===t)return!0;if("exclude"===t)break;s=W(s)}return!1}function U(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return F(e=B(e,t),t)&&(e={...e,[t]:"exclude"}),e}function H(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return F(e=B(e,t),t)||(e={...e,[t]:"include"}),e}function B(e,t){let s={...e};for(let r of Object.keys(e))(t.endsWith("/")&&t===r||r.startsWith(t))&&delete s[r];return s}function W(e){if(!e.startsWith("/"))throw Error("absolute path required");if("/"===e)return null;let t=e.endsWith("/")?e.lastIndexOf("/",e.length-2):e.lastIndexOf("/");return t<=0?"/":e.slice(0,t+1)}let K="lastSelectedRepo";function X(e,t){return{name:e,path:t.endsWith("/")?t:t+"/",size:0,children:new Map}}function J(e){var t,s;let{initialConfig:i,tokenLimit:a,alreadyUsedTokens:o,onSubmit:d,isSubmitting:c}=e,[u,h]=(0,n.useState)("/"),x=void 0===i,p=a*l.Pu,[m,g]=(0,n.useState)(()=>{if(i)return i;let e=function(){let e=localStorage.getItem(K);if(e){var t;let s=JSON.parse(e);if(s&&"object"==typeof(t=s)&&null!==t&&"string"==typeof t.owner&&"string"==typeof t.repo&&"string"==typeof t.branch)return s}return null}();return e?{owner:e.owner,repo:e.repo,branch:e.branch,filters:{filters:{}}}:{}}),{owner:f,repo:b,branch:v,filters:j}=m;(0,n.useEffect)(()=>{h("/")},[b]);let y=e=>{g({owner:f,repo:b,branch:v,filters:{filters:e}})},w=(0,n.useMemo)(()=>!D()(null==i?void 0:i.filters,j),[i,j]),{data:N,isFetching:_,error:A}=(0,R.tn)({owner:f,repo:b,branch:v}),k=(0,n.useMemo)(()=>(function(e,t){if(!t||!e)return[];let s=[];for(let r of t.tree)"blob"===r.type&&F(e,"/"+r.path)&&s.push(r);return s})(null==j?void 0:j.filters,N.tree),[null==j?void 0:j.filters,N.tree]),C=Math.ceil(100*k.map(e=>e.size).reduce((e,t)=>e+t,0)/p)+Math.ceil(100*o/a),S=(0,n.useMemo)(()=>N.tree?function(e){let t={name:"",path:"/",size:0,children:new Map};for(let s of e.tree){let e=s.path.split("/"),r=e.pop(),i=t;for(let t=0;t<e.length;t++){let r=e[t];if(!i.children.has(r)){let s="/"+e.slice(0,t+1).join("/");i.children.set(r,X(r,s))}"blob"===s.type&&(i.size+=s.size),i=i.children.get(r)}if("blob"===s.type)i.children.set(r,{name:r,path:"/"+s.path,size:s.size}),i.size+=s.size;else i.children.set(r,X(r,"/"+s.path))}return t}(N.tree):null,[N.tree]);(0,n.useEffect)(()=>{(null==N?void 0:N.repo)&&(null==N?void 0:N.repo.default_branch)&&!v&&g(e=>({...e,branch:N.repo.default_branch}))},[null==N?void 0:N.repo,v,g]),(0,n.useEffect)(()=>{f&&b&&v&&localStorage.setItem(K,JSON.stringify({owner:f,repo:b,branch:v}))},[f,b,v]);let[M,E]=(0,n.useState)("");return(0,r.jsxs)("div",{className:"rounded-xl border-0.5 border-border-300 bg-bg-000 shadow-sm h-[600px] flex flex-col",children:[(0,r.jsx)(Y,{isCreating:x,config:m,setConfig:g,searchQuery:M,setSearchQuery:E,isSubmitting:c,percentUsed:C,onSubmit:d,areFiltersDirty:w,enforceSizeLimit:!0}),_?(0,r.jsx)(V,{}):null!==A?(0,r.jsx)($,{error:A}):b&&f&&v?M?(0,r.jsx)(es,{rootNode:S,searchQuery:M,filters:null!=(t=null==j?void 0:j.filters)?t:{},setFilters:y,sizeLimit:p,setCurrentDirectory:h,setSearchQuery:E,enforceSizeLimit:!0}):(0,r.jsx)(et,{repo:b,rootNode:S,filters:null!=(s=null==j?void 0:j.filters)?s:{},setFilters:y,sizeLimit:p,currentDirectory:u,setCurrentDirectory:h,enforceSizeLimit:!0}):(0,r.jsx)(q,{}),(0,r.jsx)(er,{percentUsed:C,selectedPaths:k,alreadyUsedTokens:o,tokenLimit:a,enforceSizeLimit:!0})]})}function q(){return(0,r.jsx)("div",{className:"flex items-center justify-center h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,r.jsx)(P.A,{defaultMessage:"Select a repository or paste a URL above to get started",id:"aGsfPG9sTD"})})}let V=()=>(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 h-full bg-bg-000 shadow-sm text-sm text-text-300",children:[(0,r.jsx)("div",{children:(0,r.jsx)(m.Loading,{size:"sm"})}),(0,r.jsx)(P.A,{defaultMessage:"Fetching repository...",id:"hnjVW1oRt2"})]});function $(e){let{error:t}=e,s=t instanceof f.LG&&404===t.statusCode,i=t instanceof f.LG&&"github_get_tree_api_call_limit_exceeded"===t.errorCode;return(0,r.jsx)("div",{className:"flex h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,r.jsx)("div",{className:"flex items-center gap-2 m-6",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.t,{size:16}),(0,r.jsx)("span",{children:(0,r.jsx)(P.A,{defaultMessage:"Claude cannot access that resource. If you know that it exists, you may first need to grant or request access <link>here</link>.",id:"41xNOZpKM8",values:{link:e=>(0,r.jsx)(z(),{href:"".concat(function(e){if(e instanceof f.LG){var t,s;let r=null==(s=e.extra)||null==(t=s.details)?void 0:t.app_public_url;if(r)return r}return"https://github.com/apps/claude-for-github"}(t),"/installations/select_target"),target:"_blank",className:"underline",children:e})}})})]}):i?(0,r.jsx)("span",{className:"text-danger-000",children:(0,r.jsx)(P.A,{defaultMessage:"Please try a smaller repo.",id:"lvImCTHUvN"})}):(0,r.jsx)("span",{className:"text-danger-000",children:(0,r.jsx)(P.A,{defaultMessage:"An error occurred while fetching that resource. Please try again.",id:"u8OHhkIcYv"})})})})}function Y(e){var t,s;let{config:i,setConfig:l,isCreating:o,isSubmitting:d,percentUsed:c,searchQuery:u,setSearchQuery:p,onSubmit:m,areFiltersDirty:g,enforceSizeLimit:f}=e,[b,j]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center py-2 min-h-14 px-4 font-base border-b-0.5 border-border-300",children:[(0,r.jsx)(h.A9,{size:18,type:a.v8.GITHUB,className:"flex-shrink-0"}),!b&&(0,r.jsx)(Q,{config:i,setConfig:l,isCreating:o}),(0,r.jsxs)("div",{className:"inline-flex gap-0 items-center",children:[(0,r.jsx)(Z,{isCreating:o,isExpanded:b,setIsExpanded:j,setConfig:l,className:(0,M.A)({"flex-1 flex-shrink":o&&b})}),i.repo&&!b&&(0,r.jsx)(ee,{isExpanded:y,setIsExpanded:w,searchQuery:u,setSearchQuery:p,className:"flex-1 flex-shrink"})]}),(0,r.jsx)(E.N,{children:!b&&i.repo&&0!==Object.keys(null!=(s=null==(t=i.filters)?void 0:t.filters)?s:{}).length&&(o||g)&&(0,r.jsx)(I.P.div,{className:"ml-auto",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,r.jsx)(x.$,{disabled:d||f&&c>100||!i.owner||!i.repo||!i.branch,onClick:()=>m(i),children:d?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v.N,{className:"animate-spin"})}):o?(0,r.jsx)(P.A,{defaultMessage:"Add files",id:"xrAjmQ72mN"}):(0,r.jsx)(P.A,{defaultMessage:"Update",id:"BWpuKlRSA1"})})})})]})}function Q(e){let{config:t,setConfig:s,isCreating:i,className:l}=e,{data:a=[]}=(0,R.b4)(),o=a.map(e=>({owner:e.owner.login,repo:e.name,branch:e.default_branch}));t.owner&&t.repo&&t.branch&&!o.some(e=>e.repo===t.repo&&e.owner===t.owner&&e.branch===t.branch)&&o.unshift({owner:t.owner,repo:t.repo,branch:t.branch});let[d,c]=(0,n.useState)(void 0);return(0,n.useEffect)(()=>{t.owner&&t.repo&&t.branch?c(JSON.stringify({owner:t.owner,repo:t.repo,branch:t.branch})):c(void 0)},[t]),(0,r.jsx)("div",{className:l,children:(0,r.jsxs)(G.bL,{value:d,onValueChange:e=>{s({...JSON.parse(e),filters:{filters:{}}}),c(e)},disabled:!i,children:[(0,r.jsxs)(G.l9,{className:(0,M.A)("flex flex-row rounded-md border-0.5 px-2 border-border-300 py-1 items-center gap-1 text-nowrap overflow-x-hidden",{"max-w-96  pointer-cursor select-none hover:bg-bg-100 ":i,"bg-bg-100":!i}),children:[(0,r.jsx)(G.WT,{placeholder:"Select a repository"}),i&&(0,r.jsx)(G.In,{className:"pl-1",children:(0,r.jsx)(j.a,{})})]}),(0,r.jsx)(G.ZL,{children:(0,r.jsx)(G.UC,{className:"border-0.5 border-border-300 bg-bg-100 min-w-72 rounded-lg shadow-sm z-dropdown mt-1 p-1 max-h-96 overflow-y-auto",position:"popper",children:(0,r.jsx)(G.LM,{className:"overflow-auto",children:o.map((e,t)=>(0,r.jsx)(G.q7,{value:JSON.stringify(e),className:(0,M.A)("relative flex flex-row p-1.5 cursor-pointer hover:bg-bg-200 focus:outline-none focus:bg-bg-200 rounded-md"),children:(0,r.jsx)(G.p4,{children:(0,r.jsxs)("span",{className:"flex flex-row text-sm items-center ",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-text-300",children:e.owner}),"\xa0",(0,r.jsx)("span",{className:"text-text-500/50",children:"/"}),"\xa0",(0,r.jsx)("span",{className:"text-text-000",children:e.repo})]}),(!i||i&&"master"!==e.branch&&"main"!==e.branch)&&(0,r.jsxs)("span",{className:" flex flex-row font-mono text-xs text-text-300 rounded-full px-1.5 ml-2 gap-1 items-center bg-border-400/[0.03] border-border-300 border-0.5 ",children:[(0,r.jsx)(y.r,{}),e.branch]})]})})},t))})})})]})})}function Z(e){let{isCreating:t,isExpanded:s,setIsExpanded:i,setConfig:l,className:a}=e,o=(0,O.A)(),[d,c]=(0,n.useState)(""),u=()=>{let{owner:e,repo:t,branch:s}=function(e){let t;try{t=new URL(null!=e?e:"")}catch(e){return{}}if("github.com"!==t.hostname)return{};let[,s,r,i,...l]=t.pathname.split("/");return{owner:s,repo:r,location:i,branch:l.join("/").replace(/\/$/,"")}}(d);l({owner:e,repo:t,branch:s,filters:{filters:{}}}),i(!1),c("")};return t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,M.A)("flex flex-row gap-1 items-center text-sm px-0.5",{"border-0.5 border-border-300 rounded-md h-[29px] w-64 transition":s},a),children:[(0,r.jsx)(g.Tooltip,{tooltipContent:"Paste GitHub URL",children:!s&&(0,r.jsx)(x.$,{onClick:()=>i(!s),size:"icon_sm",variant:"ghost",disabled:s,children:(0,r.jsx)(w.X,{size:16})})}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ml-2",type:"text",value:d,onChange:e=>c(e.target.value),placeholder:o.formatMessage({defaultMessage:"Paste GitHub URL",id:"RobpzbjbFb"}),autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&u()}}),d&&(0,r.jsx)(E.N,{children:(0,r.jsx)(I.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,r.jsx)(x.$,{onClick:u,size:"icon_xs",children:(0,r.jsx)(N.y,{})})})})]})]}),s&&(0,r.jsx)(x.$,{onClick:()=>{i(!1),c("")},size:"icon_sm",variant:"ghost",className:"ml-2",children:(0,r.jsx)(_.X,{})})]})}function ee(e){let{isExpanded:t,setIsExpanded:s,searchQuery:i,setSearchQuery:l,className:a}=e,n=(0,O.A)();return(0,r.jsxs)("div",{className:(0,M.A)("flex flex-row items-center text-sm pl-0 p-1",{"border-0.5 border-border-300 rounded-md h-[29px] transition":t},a),children:[(0,r.jsx)(g.Tooltip,{tooltipContent:"Search files",children:(0,r.jsx)(x.$,{onClick:()=>s(!t),size:"icon_sm",variant:"ghost",disabled:t,children:(0,r.jsx)(A.e,{size:"16"})})}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",placeholder:n.formatMessage({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:i,className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ",onChange:e=>l(e.target.value),autoFocus:!0}),(0,r.jsx)(x.$,{onClick:()=>{l(""),s(!1)},size:"icon_xs",variant:"ghost",children:(0,r.jsx)(_.X,{})})]})]})}function et(e){let{repo:t,rootNode:s,filters:i,setFilters:l,sizeLimit:a,currentDirectory:o,setCurrentDirectory:d,enforceSizeLimit:c}=e,u=function(e,t){let s=t.split("/").slice(1,-1),r=e;for(let e of s){if(!r.children)return null;r=r.children.get(e)}return r}(s,o),h=(null==u?void 0:u.children)?[...u.children.values()].sort((e,t)=>e.children?t.children?e.path.localeCompare(t.path):-1:1):[],x=(0,n.useMemo)(()=>{let e=[],s=o;for(;s;){let r=s.slice(s.lastIndexOf("/",s.length-2)).slice(1,-1);e.unshift({name:r||t,path:s}),s=W(s)}return e},[t,o]),m=u?ei(u,i)?"partial":F(i,u.path)?"checked":"unchecked":"unchecked";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2 py-2 px-4 border-b-0.5 border-border-300 bg-bg-100/50 text-sm",children:[u&&(0,r.jsx)(p.f,{checkState:m,onClick:e=>{let{didCheck:t}=e;t?l(H(i,u.path)):l(U(i,u.path))}}),(0,r.jsx)("div",{className:"flex-row gap-1 ",children:x.map((e,t)=>{let{path:s,name:i}=e;return x.length===t+1?(0,r.jsx)("span",{children:i},t):(0,r.jsxs)("span",{className:"first-child:pointer-events-none",children:[(0,r.jsx)("button",{className:"hover:text-text-200 text-text-500 transition",onClick:()=>d(s),children:i}),t<x.length-1&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:"mx-1 text-text-500/50",children:"/"})})]},t)})})]},"breadcrumbs")}),(0,r.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:h.map(e=>(0,r.jsx)(el,{node:e,showPath:!1,filters:i,sizeLimit:a,onUpdateFilters:l,onClick:e.children?()=>d(e.path):void 0,enforceSizeLimit:c},e.path))},"rows")]})}function es(e){let{rootNode:t,searchQuery:s,filters:i,setFilters:l,sizeLimit:a,setCurrentDirectory:o,setSearchQuery:d,enforceSizeLimit:c}=e,u=(0,n.useMemo)(()=>{let e=[],r=[t],i=s.toLowerCase();for(;r.length>0&&e.length<50;){let t=r.pop();t.children&&r.push(...t.children.values()),t.path.toLowerCase().includes(i)&&e.push(t)}return e},[s,t]);return(0,r.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:u.slice(0,100).map(e=>(0,r.jsx)(el,{node:e,showPath:!0,filters:i,sizeLimit:a,onUpdateFilters:l,onClick:e.children?()=>{o(e.path),d("")}:void 0,onNavigate:e=>{o(e),d("")},enforceSizeLimit:c},e.path))},"rows")}function er(e){let{percentUsed:t,selectedPaths:s,alreadyUsedTokens:i,tokenLimit:l,enforceSizeLimit:a}=e,{progressBarPercentPrimary:o,progressBarPercentSecondary:d}=(0,n.useMemo)(()=>{let e=Math.min(100,Math.ceil(100*i/l));return{progressBarPercentPrimary:Math.min(100,t-e),progressBarPercentSecondary:e}},[t,i,l]),c=a?(0,r.jsx)(P.A,{defaultMessage:"{percentUsed}% of capacity used",id:"1VbFlPsYRL",values:{percentUsed:ea(t)}}):null;return(0,r.jsxs)("div",{className:(0,M.A)("flex text-xs items-center justify-between border-border-300 border-t-0.5 py-2 px-4 rounded-b-lg transition",{"bg-danger-100 text-danger-900":a&&t>=100},{"text-text-300":!a||t<100}),children:[s.length&&(!a||t<100)?(0,r.jsx)("p",{children:(0,r.jsx)(P.A,{defaultMessage:"{selected, plural, one {# file} other {# files}} selected",id:"F7Bwhc8GRB",values:{selected:s.length}})}):!a||t<100?(0,r.jsx)("p",{children:(0,r.jsx)(P.A,{defaultMessage:"Select files to add to chat context",id:"t6XeSPdQqI"})}):(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center ",children:[(0,r.jsx)(k.N,{className:"opacity-80",size:14}),(0,r.jsx)("p",{children:(0,r.jsx)(P.A,{defaultMessage:"Remove some files to stay within size limits",id:"k+ns1o6klw"})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[a&&(0,r.jsx)(en,{totalPercent:t,secondaryPercent:d}),a&&(0,r.jsx)("span",{className:"min-w-10 text-right",children:d>0?(0,r.jsx)(g.Tooltip,{tooltipContent:"".concat(ea(d),"% used by other knowledge + ").concat(ea(o),"% by this content"),children:(0,r.jsx)("span",{children:c})}):c})]})]})}function ei(e,t){if(void 0===e.children)return!1;if(F(t,e.path)){for(let s of e.children.values())if(!F(t,s.path)||ei(s,t))return!0}else for(let s of e.children.values())if(F(t,s.path)||ei(s,t))return!0;return!1}function el(e){let{node:t,showPath:s,filters:i,sizeLimit:l,onUpdateFilters:a,onClick:n,onNavigate:o,enforceSizeLimit:d}=e,c=void 0!==t.children,u=F(i,t.path),h=ei(t,i);return(0,r.jsxs)("div",{onClick:n,className:(0,M.A)("group flex justify-start items-center gap-2 py-2 px-4 border-b-0.5 border-border-400 hover:bg-bg-100",{"cursor-pointer":n}),children:[(0,r.jsx)(p.f,{checkState:h?"partial":u?"checked":"unchecked",onClick:e=>{let{didCheck:s}=e;s?a(H(i,t.path)):a(U(i,t.path))}}),void 0===t.children?(0,r.jsx)(C.Z,{weight:"light",size:20,className:"flex-shrink-0 text-text-400"}):(0,r.jsx)(S.vd,{weight:"fill",className:"flex-shrink-0 text-accent-secondary-200",size:20}),(0,r.jsx)("div",{className:(0,M.A)("w-5/6 text-text-100 overflow-x-hidden text-ellipsis text-nowrap",{"text-text-200 group-hover:text-text-000":c}),onClick:e=>{c&&n&&(e.stopPropagation(),n())},children:s?(e=>{let t=e.replace(/^\/+|\/+$/g,"").split("/");return(0,r.jsx)("span",{children:t.map((e,s)=>{let i="/"+t.slice(0,s+1).join("/")+"/",l=s===t.length-1,a=!l&&o?e=>{e.stopPropagation(),o(i)}:void 0;return(0,r.jsxs)("span",{children:[(0,r.jsx)(l?"span":"button",{className:(0,M.A)(l?"text-text-000":"text-text-400",a?"hover:text-text-100 transition":""),onClick:a,children:e}),!l&&(0,r.jsx)("span",{className:"opacity-25 mx-1",children:"/"})]},s)})})})(t.path):t.name}),l&&d&&(0,r.jsxs)("span",{className:"w-1/6 text-text-400 text-xs text-right",children:[ea(100*t.size/l),"%"]})]})}function ea(e){let t;return 0===e?"0":e<1?"<1":(t=Math.ceil(e),new Intl.NumberFormat().format(t))}function en(e){let{totalPercent:t,secondaryPercent:s=0}=e,i=t>=100,l=t-s;return(0,r.jsx)("div",{className:"bg-bg-100 border-0.5 border-border-300 w-24 h-2 rounded-full overflow-hidden relative",children:(0,r.jsxs)("div",{className:"absolute inset-0",children:[s>0?(0,r.jsx)("div",{style:{width:"".concat(Math.min(100,Math.max(0,s)),"%")},className:"absolute inset-y-0 left-0 bg-border-400"}):null,l>0?(0,r.jsx)("div",{style:{width:"".concat(Math.min(100-(s||0),Math.max(4*(l>0),l)),"%"),left:"".concat(s||0,"%")},className:(0,M.A)("absolute inset-y-0 transition-all",{"bg-danger-100":i,"bg-text-100":!i})}):null]})})}function eo(e){let{isOpen:t,onClose:s,onCreated:h,projectUuid:x,location:p,syncSource:m,setIsUploadingGithubSync:g}=e,{maxKbTokens:f}=(0,c.AO)(),b=(0,u.D)(null),v="project"===p&&x?f:b,j=(0,c.ED)(x),y=(0,n.useMemo)(()=>{if(x&&void 0!==j){var e;return Math.max(0,j-((null==m||null==(e=m.status)?void 0:e.current_size_bytes)?m.type===a.v8.GITHUB?m.status.current_size_bytes/l.Pu:m.status.current_size_bytes/l.t2:0))}return 0},[x,j,m]),w=(0,n.useCallback)(e=>{null==h||h(e)},[h]),{mutate:N,isPending:_}=(0,d.pz)(x,{onSuccess:w,onError:()=>null==g?void 0:g(!1)}),{mutate:A,isPending:k}=(0,d.M3)(x,{onSuccess:s}),{mutate:C,isPending:S}=(0,o.EF)({onSuccess:w,onError:()=>null==g?void 0:g(!1)}),{mutate:M,isPending:E}=(0,o.VA)({onSuccess:s}),I=(0,n.useCallback)(e=>{m?("project"===p&&x?A:M)({sync_source_uuid:m.uuid,sync_source_config:e}):(null==g||g(!0),s(),("project"===p&&x?N:C)({sync_source_type:a.v8.GITHUB,sync_source_config:e}))},[m,p,x,N,A,C,M,s,g]);return(0,r.jsx)(i.aF,{isOpen:t,onClose:s,title:"Add content from GitHub",subtitle:"Select the files you would like to add to this ".concat(x?"project":"chat"),modalSize:"xl",hasCloseButton:!0,autoCloseOnFocusOut:!1,closeOnEscapeKeydown:!1,children:(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(J,{initialConfig:null==m?void 0:m.config,tokenLimit:v,alreadyUsedTokens:y,isSubmitting:_||k||S||E,onSubmit:I})})})}},62757:(e,t,s)=>{s.d(t,{BU:()=>w,G8:()=>j,Gm:()=>N,Ow:()=>v,g7:()=>b,hs:()=>_});var r=s(85644),i=s(77186),l=s(1761),a=s(55554),n=s(27062),o=s(77101),d=s(85544),c=s(70659),u=s(62370),h=s(85717),x=s(45078),p=s(91768),m=s(43156),g=s(40459);let f=()=>{var e;let{activeOrganization:t}=(0,l.YL)(),{value:s}=(0,n.fS)("use_incoherent_traffic_light_noises"),{selectedTier:r,isTierSelectorEnabled:i,shouldOverrideFeatureAccess:o}=(0,a.t)();return(null==t||null==(e=t.settings)?void 0:e.sampling_restriction)!=="aws_marketplace"&&(i&&o&&r?r===d.d7.MAX||r===d.d7.ENTERPRISE:s)},b=()=>{let e=f(),t=y();return e&&t&&!g.env.NEXT_PUBLIC_DISABLE_COMPASS},v=()=>{let e=f(),t=w();return e&&t},j=()=>{let e=(0,r.Wq)();return t=>e(t,"compass")},y=()=>{let e=(0,m.be)(),t=(0,h.fb)(),s=(0,p.XE)(o.v8.GMAIL),r=(0,p.XE)(o.v8.GCAL),i=(0,c.lu)();return e||t||s||r||i},w=()=>{let e=(0,m.YW)(),t=(0,h.K6)(),s=(0,p.Ys)(o.v8.GMAIL),r=(0,p.Ys)(o.v8.GCAL),i=(0,u.Uz)({type:"remote"}).length>0;return e||t||s||r||i},N=e=>{var t;let s=(0,m.fy)(e),r=(0,h.$f)(e),{isAuthenticated:i}=(0,h.kJ)(),l=(0,p.X0)(o.v8.GMAIL,e),{isAuthenticated:a}=(0,p.ob)(o.v8.GMAIL),n=(0,p.X0)(o.v8.GCAL,e),{isAuthenticated:d}=(0,p.ob)(o.v8.GCAL),c=null!=(t=(0,x.v)("enabled_mcp_tools"))?t:{},g=(0,u.Uz)({type:"remote",isConnected:!0}).some(e=>{var t;return null==(t=e.tools)?void 0:t.some(e=>!1!==c[e.enabledKey])});return s||r&&i||l&&a||n&&d||g},_=(e,t)=>{let{activeOrganization:s}=(0,l.YL)(),r=null==s?void 0:s.uuid;return(0,i.L2)("/api/organizations/".concat(r,"/chat_conversations/").concat(e,"/task/").concat(t,"/stop"),"POST",{enabled:!!(r&&e&&t)})}},66436:(e,t,s)=>{s.d(t,{$:()=>y,u:()=>I});var r=s(42977),i=s(54568),l=s(15964),a=s(15046),n=s(90510),o=s(12072),d=s(91961),c=s(58911),u=s(62094),h=s(60265),x=s(34405),p=s(32987),m=s(61773),g=s(62971),f=s(50707);function b(){let e=(0,r._)(["\n  flex \n  flex-row \n  items-center \n  flex-1 \n  min-w-28\n"]);return b=function(){return e},e}function v(){let e=(0,r._)(["\n  flex \n  flex-col  \n  flex-1 \n  min-w-0\n"]);return v=function(){return e},e}function j(){let e=(0,r._)(["\n  font-small\n  text-text-500\n  text-ellipsis \n  break-words \n  whitespace-nowrap \n  min-w-0\n  overflow-hidden\n"]);return j=function(){return e},e}let y=e=>{let{item:t,onClick:s,isHighlighted:r,onMouseOver:n}=e,o=r&&!(0,d.fJ)(),m={disabled:t.isDisabled&&"upgrade"!==t.tag,onClick:t.isDisabled&&"upgrade"!==t.tag?void 0:()=>{"switch"===t.type&&t.onClick&&t.onClick(),null==s||s()},onMouseOver:n},b=t.isDisabled&&!t.rateLimitReached||"new chat"===t.tag||"upgrade"===t.tag&&!t.rateLimitReached;return"subheader"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsx)(N,{...m,children:(0,i.jsx)(C,{children:t.label})})}):"button"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(N,{className:(0,p.A)("primary"===t.variant&&"justify-center pr-4","primary"===t.variant&&o&&"!bg-accent-secondary-900/50 !text-accent-secondary-100"),isHighlighted:o,...m,hasSubtitle:!!t.subtitle,children:[(0,i.jsx)(_,{appearsDisabled:b,isHighlighted:o,itemKey:t.key,hasSubtitle:!!t.subtitle,children:t.icon}),(0,i.jsxs)(k,{children:[(0,i.jsxs)(A,{children:[(0,i.jsx)(S,{isHighlighted:o,appearsDisabled:b,children:t.label}),(0,i.jsx)(I,{tag:"upgrade"!==t.tag?t.tag:void 0})]}),(0,i.jsx)(M,{children:t.subtitle})]}),(0,i.jsx)(E,{className:"!text-text-500 opacity-70",children:t.secondaryText}),t.isExternal&&!t.tag&&(0,i.jsx)(c.B,{size:16,className:"text-text-500 opacity-70"}),"upgrade"===t.tag&&(0,i.jsx)(f.M,{})]})}):"buttonGroup"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(N,{...m,isHighlighted:o,children:[(0,i.jsx)(_,{appearsDisabled:b,isHighlighted:o,itemKey:t.key,hasSubtitle:!!t.subtitle,children:t.icon}),(0,i.jsxs)(A,{children:[(0,i.jsx)(S,{isHighlighted:o,appearsDisabled:b,children:t.label}),(0,i.jsx)(I,{tag:t.tag})]}),(0,i.jsx)(u.K,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleGroup"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(N,{...m,isHighlighted:o,className:"group/toggleGroup",children:[(0,i.jsx)(_,{appearsDisabled:b,isHighlighted:o,itemKey:t.key,hasSubtitle:!!t.subtitle,children:t.icon}),(0,i.jsxs)(A,{children:[(0,i.jsx)(S,{isHighlighted:o,appearsDisabled:b,children:t.label}),(0,i.jsx)(I,{tag:t.tag})]}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:void 0!==t.enabledCount?t.enabledCount>0?t.enabledCount===t.totalCount?t.onClick&&(0,i.jsx)("div",{onClick:e=>{var s;e.stopPropagation(),null==(s=t.onClick)||s.call(t)},children:(0,i.jsx)(a.j,{readOnly:!0,height:16,width:28,checked:!0})}):(0,i.jsxs)("div",{className:"text-accent-secondary-200 h-5 text-xs bg-bg-400/50 rounded-full px-2 inline-flex items-center gap-1",children:[t.enabledCount,(0,i.jsx)("span",{className:"text-text-500 opacity-70",children:(0,i.jsx)(g.A,{defaultMessage:"of",id:"C9WGEuJVec"})}),(0,i.jsx)("span",{className:"text-text-500 opacity-70",children:t.totalCount})]}):t.onClick&&(0,i.jsx)("div",{onClick:e=>{var s;e.stopPropagation(),null==(s=t.onClick)||s.call(t)},children:(0,i.jsx)(a.j,{readOnly:!0,height:16,width:28,checked:!1})}):null}),(0,i.jsx)(u.K,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"optionGroup"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(N,{...m,isHighlighted:o,children:[(0,i.jsx)(_,{appearsDisabled:b,isHighlighted:o,itemKey:t.key,hasSubtitle:!!t.subtitle,children:t.icon}),(0,i.jsxs)(A,{children:[(0,i.jsx)(S,{isHighlighted:o,appearsDisabled:b,children:t.label}),(0,i.jsx)(I,{tag:t.tag})]}),(0,i.jsx)(E,{children:t.secondaryText}),(0,i.jsx)(u.K,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleAll"===t.type||"toggle"===t.type||"switch"===t.type||"option"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(N,{...m,hasSubtitle:!!t.subtitle,className:(0,p.A)("active:!scale-100",t.isChecked&&"text-primary-500"),isHighlighted:o,children:[(0,i.jsx)(_,{appearsDisabled:b,isHighlighted:o,itemKey:t.key,hasSubtitle:!!t.subtitle,children:t.icon}),(0,i.jsxs)(k,{children:[(0,i.jsxs)(A,{children:[(0,i.jsx)(S,{isHighlighted:o,appearsDisabled:b,children:t.label}),(0,i.jsx)(L,{tag:t.timeTag}),(0,i.jsx)(I,{tag:"upgrade"!==t.tag?t.tag:void 0})]}),(0,i.jsx)(M,{children:t.subtitle})]}),"toggleAll"===t.type&&(0,i.jsx)(l.Sc,{variant:"minus",disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,p.A)(b?"!cursor-default":"!opacity-100 !cursor-pointer")}),"toggle"===t.type&&(0,i.jsx)(l.Sc,{disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,p.A)(b?"!cursor-default":"!opacity-100 !cursor-pointer")}),"switch"===t.type&&"upgrade"===t.tag?(0,i.jsx)(f.M,{className:(0,p.A)(!!t.subtitle&&"mt-[0.25rem]")}):"switch"===t.type?(0,i.jsx)(a.j,{readOnly:!0,height:16,width:28,checked:t.isChecked,className:(0,p.A)(!t.isDisabled&&"!cursor-pointer",b&&"opacity-50",!!t.subtitle&&"mt-[0.25rem]")}):null,"option"===t.type&&t.isChecked&&(0,i.jsx)(h.J,{weight:"bold",size:16,className:"text-accent-secondary-100 shrink-0"})]})}):"divider"===t.type?(0,i.jsx)("div",{className:"h-[0.5px] my-1.5 mx-0.5 bg-border-300"}):"back"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(N,{...m,isHighlighted:o,children:[(0,i.jsx)(_,{itemKey:t.key,hasSubtitle:!!t.subtitle,children:(0,i.jsx)(x.n,{size:16,className:(0,p.A)("h-4 w-4 text-text-500 group-hover:!text-text-400",o&&"!text-text-400")})}),(0,i.jsx)("span",{className:"relative",children:(0,i.jsxs)(A,{children:[(0,i.jsx)(S,{className:(0,p.A)("opacity-100 transition-opacity text-text-500 group-hover:!text-text-400",o&&"!text-text-400"),children:t.label}),(0,i.jsx)(I,{tag:t.tag})]})})]})}):null},w=e=>{let{tooltip:t,tooltipImage:s,children:r}=e,l=(0,i.jsx)("div",{className:"",children:r});return t?(0,i.jsx)(o.Tooltip,{sideOffset:10,contentStyle:s?"sampleImage":"inputMenu",tooltipContent:(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[!!s&&(0,i.jsx)(m.default,{src:s.src,alt:"",width:s.width,height:s.height,className:"rounded-[6px] overflow-hidden"}),(0,i.jsx)("p",{className:"p-1",children:t})]}),side:"right",children:l}):l},N=e=>{let{isHighlighted:t,className:s,hasSubtitle:r,...l}=e;return(0,i.jsx)("button",{...l,className:(0,p.A)("group flex w-full text-left gap-2.5 py-auto px-1.5 font-base text-text-200 rounded-lg select-none items-center",t&&!l.disabled&&"!bg-bg-300/60 !text-text-000",s,!l.disabled&&"active:scale-[0.995] hover:bg-bg-300/60 hover:text-text-000",r?"h-[3rem]":"h-[2rem]")})},_=e=>{let{appearsDisabled:t,isHighlighted:s,itemKey:r,children:l,hasSubtitle:a,...n}=e;return(0,i.jsx)("div",{...n,className:(0,p.A)("group/icon min-w-4 min-h-4 flex items-center justify-center text-text-300 shrink-0",a&&"self-start pt-2.5",t&&"opacity-50",s&&!t&&"!text-text-100",!t&&"group-hover:text-text-100",n.className),children:l})},A=n.J.div(b()),k=n.J.div(v()),C=e=>{let{className:t,...s}=e;return(0,i.jsx)("p",{...s,className:(0,p.A)("font-small text-text-500 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)})},S=e=>{let{appearsDisabled:t,isHighlighted:s,className:r,...l}=e;return(0,i.jsx)("p",{...l,className:(0,p.A)("font-base text-text-300 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",s&&!t&&"!text-text-100",r,t&&"opacity-50",!t&&"group-hover:text-text-100")})},M=n.J.p(j()),E=e=>{let{className:t,...s}=e;return s.children?(0,i.jsx)("p",{...s,className:(0,p.A)("flex-initial text-right shrink font-base text-accent-secondary-100 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)}):null},I=e=>{let{tag:t,className:s}=e;return t?(0,i.jsx)("div",{className:(0,p.A)("uppercase inline-flex items-center text-[0.5625rem] font-medium h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0 will-change-transform",("new chat"===t||"alpha"===t)&&"text-text-300 bg-bg-300/60",("pro"===t||"beta"===t)&&"text-accent-secondary-100 bg-accent-secondary-100/[8%]","upgrade"===t&&"border border-border-400 text-accent-secondary-000",s),children:t}):null},L=e=>{let{tag:t,className:s}=e;return t?(0,i.jsx)("div",{className:(0,p.A)("text-text-500 bg-bg-100 inline-flex items-center text-[0.5625rem] h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0",s),children:t}):null}},74744:(e,t,s)=>{s.d(t,{br:()=>_,Tc:()=>b});var r=s(54568),i=s(7386),l=s(33395),a=s(34059),n=s(77101);let o=e=>e===n.I5.ACCESS_DENIED||e===n.I5.UNAUTHENTICATED||e===n.I5.DISABLED;n.v8.GDRIVE,n.v8.GITHUB,n.v8.OUTLINE,n.v8.SALESFORCE,n.v8.GMAIL,n.v8.GCAL,n.v8.SLACK,n.v8.ASANA,n.v8.CANVAS,n.v8.FIDDLEHEAD,n.v8.CUTTLEFISH;var d=s(7620),c=s(46760),u=s(34281),h=s(85717),x=s(45715),p=s(60885),m=s(35391);let g=e=>{let t=(0,c.A)(),s={[n.I5.UNAUTHENTICATED]:t.formatMessage({defaultMessage:"Authentication needed",id:"AYP3OHxyGn"}),[n.I5.ACCESS_DENIED]:t.formatMessage({defaultMessage:"Content not accessible",id:"IPK01iLM7n"}),[n.I5.DISABLED]:t.formatMessage({defaultMessage:"Feature disabled by organization",id:"0mkp6rxalw"})};return e in s?s[e]:void 0},f=e=>{var t;let{syncSourceType:s,syncStatus:l,title:a,url:d,handleClick:c,isLoading:h,actions:x,isSyncing:p,...m}=e,f=o(l),b=g(l),v=(0,u.v)(),y={};return y=l===n.I5.UNAUTHENTICATED?{handleClick:()=>{v(s)}}:c?{handleClick:c}:{url:d},(0,r.jsx)(i.Iq,{actions:x,title:null!=(t=null!=b?b:a)?t:"Untitled",tag:(0,r.jsx)(j,{type:s}),isError:f,isLoading:h,isSyncing:p,...y,...m})},b=e=>{let{syncSourceType:t,syncStatus:s,url:i,...a}=e,d=o(s),c=g(s),h=(0,u.v)(),x={};return(x=s===n.I5.UNAUTHENTICATED?{handleClick:()=>{h(t)}}:{url:i},d)?(0,r.jsx)(l.$,{...a,...x,isError:!0,title:c,subtitles:void 0,tag:void 0}):(0,r.jsx)(l.$,{...a,...x})},v={[n.v8.GDRIVE]:"DOC",[n.v8.OUTLINE]:"DOC",[n.v8.GITHUB]:"GITHUB",[n.v8.SALESFORCE]:"SALESFORCE",[n.v8.GMAIL]:"EMAIL",[n.v8.GCAL]:"CALENDAR",[n.v8.SLACK]:"SLACK",[n.v8.ASANA]:"ASANA",[n.v8.CANVAS]:"LTI",[n.v8.FIDDLEHEAD]:"FIDDLEHEAD",[n.v8.CUTTLEFISH]:"CUTTLEFISH"},j=e=>{let{type:t}=e;return(0,r.jsxs)(i.G,{children:[(0,r.jsx)(a.A9,{type:t,size:12,variant:t===n.v8.GDRIVE?a.UF.DOCS:void 0}),(0,r.jsx)("p",{className:"uppercase truncate font-ui text-text-300 text-[11px] leading-[13px]",children:v[t]})]})},y=e=>{let{projectUuid:t,syncSource:s,location:i,actions:l,isSyncing:a,...n}=e,[c,u]=(0,d.useState)(!1),{owner:h,repo:x}=s.config,m="".concat(h,"/").concat(x),g=s.config.branch,b=!o(s.status.state),v=n.isEditable&&b,j=v||n.isInSelectionMode;return(0,r.jsxs)(r.Fragment,{children:[v&&(0,r.jsx)(p.s,{projectUuid:t,location:i,isOpen:c,onClose:()=>u(!1),syncSource:s}),(0,r.jsx)(f,{...n,syncSourceType:s.type,syncStatus:s.status.state,title:m,subtitle:g,handleClick:j?()=>{if(n.isInSelectionMode){var e;null==(e=n.handleSelect)||e.call(n,!0,!1)}u(!0)}:void 0,actions:l,isSyncing:a})]})},w=e=>{let{syncSource:t,actions:s,isSyncing:i,...l}=e,a=(0,m.d)(t.config.uri),{title:n,isLoading:o}=(0,h.zF)({uri:t.config.uri}),d=l.isInSelectionMode?()=>{var e;null==(e=l.handleSelect)||e.call(l,!0,!1)}:void 0;return(0,r.jsx)(f,{handleClick:d,...l,syncSourceType:t.type,syncStatus:t.status.state,title:n,url:a,isLoading:l.isLoading||o,actions:s,isSyncing:i})},N=e=>{let{syncSource:t,actions:s,isSyncing:i,...l}=e,a=(0,m.S)(t.config.outline_uri),{title:n,isLoading:o}=(0,x.n0)({uri:t.config.outline_uri}),d=l.isInSelectionMode?()=>{var e;null==(e=l.handleSelect)||e.call(l,!0,!1)}:void 0;return(0,r.jsx)(f,{handleClick:d,...l,syncSourceType:t.type,syncStatus:t.status.state,title:n,url:a,isLoading:l.isLoading||o,actions:s,isSyncing:i})},_=e=>{let{projectUuid:t,syncSource:s,isEditable:l=!1,location:a,actions:o,isSyncing:d,...c}=e;return(null==s?void 0:s.type)?s.type===n.v8.GITHUB?(0,r.jsx)(y,{...c,projectUuid:t,syncSource:s,isEditable:l,location:a,actions:o,isSyncing:d}):s.type===n.v8.GDRIVE?(0,r.jsx)(w,{...c,syncSource:s,isEditable:l,actions:o,isSyncing:d}):s.type===n.v8.OUTLINE?(0,r.jsx)(N,{...c,syncSource:s,isEditable:l,actions:o,isSyncing:d}):void 0:(0,r.jsx)(i.NG,{})}},82200:(e,t,s)=>{s.d(t,{mq:()=>l,t1:()=>n,wC:()=>o});var r=s(54568),i=s(7620),l=function(e){return e.IDLE="IDLE",e.DRAGGING_OFF_TARGET="DRAGGING_OFF_TARGET",e.DRAGGING_ON_TARGET="DRAGGING_ON_TARGET",e.DROPPED="DROPPED",e}({});let a=(0,i.createContext)(void 0),n=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("useDropZone must be used within a DropZoneProvider");return e},o=e=>{let{onDrop:t,children:s,className:l,disabled:n=!1}=e,[o,d]=(0,i.useState)("IDLE"),c=i.useRef(null),u=(0,i.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null==(t=c.current)?void 0:t.contains(e.target))?d("DRAGGING_ON_TARGET"):d("DRAGGING_OFF_TARGET")},[]),h=(0,i.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null==(t=c.current)?void 0:t.contains(e.relatedTarget))||e.target!==document.body&&null!==e.relatedTarget||d("IDLE")},[]),x=(0,i.useCallback)(e=>{var t;(null==(t=c.current)?void 0:t.contains(e.target))||(e.preventDefault(),d("IDLE"))},[]),p=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),t(e),d("DROPPED"),setTimeout(()=>{d("IDLE")},500)},[t]);return(0,i.useEffect)(()=>{if(!n)return document.body.addEventListener("dragover",u),document.body.addEventListener("dragleave",h),document.body.addEventListener("drop",x),()=>{document.body.removeEventListener("dragover",u),document.body.removeEventListener("dragleave",h),document.body.removeEventListener("drop",x)};d("IDLE")},[u,h,x,p,n]),(0,r.jsx)(a.Provider,{value:{dragState:o,setDragState:d},children:(0,r.jsx)("div",{ref:c,className:l,onDrop:n?void 0:p,children:s})})}},89674:(e,t,s)=>{s.d(t,{j:()=>a,y:()=>l});var r=s(96712),i=s(7620);let l=e=>{let{shouldFocus:t,target:s,delayMs:r=100}=e;(0,i.useEffect)(()=>{if(t&&s){let e=setTimeout(()=>{var e;null==(e=s.current)||e.focus()},r);return()=>clearTimeout(e)}},[t,s,r])},a=(e,t)=>{let s=(0,r.l)(),l=s.get(e),[a,n]=(0,i.useState)(void 0!==l?"true"===l:t);return[a,(0,i.useCallback)(t=>{n(r=>{let i="function"==typeof t?t(r):t;return s.set(e,i.toString()),i})},[s,e])]}}}]);