try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="26ce5418-5aad-4b58-8053-10a0495dcbcc",e._sentryDebugIdIdentifier="sentry-dbid-26ce5418-5aad-4b58-8053-10a0495dcbcc")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7934,8185],{15989:(e,t,n)=>{n.d(t,{J:()=>g});var a=n(54568),s=n(8027),r=n(11515),i=n(86030),l=n(64359),o=n(37076),c=n(32987),u=n(46760),d=n(62971),m=n(47823),p=n(73347),f=n(22364);function g(e){let{onClose:t,server:n}=e,c=(0,u.A)();return(0,a.jsx)(o.aF,{isOpen:!0,hasCloseButton:!0,onClose:t,modalSize:"xl",children:(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-6",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.d,{url:n.url,fallbackSvg:(0,a.jsx)(s.B,{letter:n.name,size:40}),size:40}),(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("p",{className:"font-medium",children:n.name}),(0,a.jsx)(i.E,{children:"remote"===n.type?(0,a.jsx)(d.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"}):(0,a.jsx)(d.A,{defaultMessage:"LOCAL DEV",id:"S14UXqQo+W"})})]}),n.url?(0,a.jsx)(m.sd,{url:n.url}):n.version&&(0,a.jsx)("div",{className:"text-sm text-text-400",children:n.version})]})]})}),(0,a.jsx)(l.r,{gradientHeight:24,className:"h-[500px]",children:(0,a.jsx)("div",{className:"flex flex-col pb-4",children:(()=>{let e=!!n.tools.length,t=!!n.resources.length,s=!!n.prompts.length,r=!e&&t,i=!e&&!t&&s;return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(v,{name:c.formatMessage({defaultMessage:"Tools",id:"nUT0LvZVOx"}),items:n.tools,server:n,isFirst:e}),t&&(0,a.jsx)(v,{name:c.formatMessage({defaultMessage:"Resources",id:"c/KktLImbB"}),items:n.resources,isFirst:r}),s&&(0,a.jsx)(v,{name:c.formatMessage({defaultMessage:"Prompts",id:"p7buKPIFPB"}),items:n.prompts,isFirst:i})]})})()})})]})})}function v(e){let{name:t,items:n,server:s,isFirst:r}=e;return(0,a.jsxs)("div",{className:(0,c.A)("flex flex-col pb-4",!r&&"border-t border-border-300 pt-4"),children:[(0,a.jsx)("div",{className:"sticky top-0 w-full bg-bg-100 pt-2 pb-4 z-10",children:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)("div",{className:"font-large-bold text-text-100",children:t})})}),(0,a.jsx)("div",{children:n.map(e=>{let t=(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"font-base-bold",children:e.displayName}),(0,a.jsx)(p.M,{text:e.description})]});return(0,a.jsx)("div",{className:"py-2",children:s?(0,a.jsx)(f.P,{tool:e,server:s,children:t},e.name):t},e.name)})})]})}},18900:(e,t,n)=>{n.d(t,{$D:()=>f,I5:()=>g,QJ:()=>p,VD:()=>h,ct:()=>A,eG:()=>b,gn:()=>v,iB:()=>m,oz:()=>y});var a=n(77186),s=n(1761),r=n(71473),i=n(27062),l=n(75632),o=n(48721),c=n(87606),u=n(7620),d=n(75006);function m(){let{value:e}=(0,i.fS)("bad_moon_rising"),t="0"===new URLSearchParams(window.location.search).get("m");return e&&!t}function p(){return(0,i.fS)("yukon_gold").value}let f=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(n,"/sessions"),{queryKey:[r.Rv,{orgUUID:n}],enabled:!!t&&e,staleTime:3e4,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function g(e,t){return{uuid:(0,l.N)(),session_id:t,type:"user",parent_tool_use_id:null,message:{role:"user",content:e}}}let v=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(n,"/sessions/").concat(e),{queryKey:[r.Ex,{orgUUID:n,sessionId:e}],enabled:!!t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function h(e){let t=(0,i.T9)("bad_moon_rising_config","environment_id","",d.z.string()),n=(0,i.T9)("bad_moon_rising_config","byoc_environment_id","",d.z.string());return"byoc"===e&&n?n:t}function y(){let e=x(),t=(0,i.T9)("bad_moon_rising_config","environment_id","",d.z.string()),n=(0,i.T9)("bad_moon_rising_config","cwd","",d.z.string());return(0,u.useCallback)(a=>{let{initialMessage:s,title:r,gitRepoUrl:i,gitBranch:l,overrideEnvironmentId:o}=a,c=[];s&&c.push({type:"event",data:s});let u=[],d=[];return i&&l&&(u.push({type:"git_repository",url:i}),d.push({type:"git_repository",git_info:{type:"github",repo:i.split("github.com/")[1],branches:[l]}})),e.mutateAsync({title:r,events:c,environment_id:o||t,session_context:{cwd:n,sources:u,outcomes:d,model:"claude-opus-4-1-20250805"}})},[e,t,n])}let x=()=>{let{activeOrganization:e}=(0,s.YL)(),t=(0,c.useQueryClient)(),n=null==e?void 0:e.uuid;return(0,a.L2)("/v1/sessions/organizations/".concat(n,"/sessions"),"POST",{onSuccess:()=>{t.invalidateQueries({queryKey:[r.Rv,{orgUUID:n}]})},meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function b(){let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/dust/generate_title_and_branch"),"POST")}let j=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="/v1/sessions/ws/organizations/".concat(e,"/sessions/").concat(t,"/subscribe");n.replay&&(a+="?replay=true");let s="https:"===window.location.protocol?"wss:":"ws:";return"".concat(s,"//").concat(window.location.host).concat(a)},_=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:n}=(0,s.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(i,"/sessions/").concat(e,"/events"),{queryKey:[r.ri,{orgUUID:i,sessionId:e}],enabled:!!n&&t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};class w{[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((e,t)=>{this.readResolve=e,this.readReject=t})}enqueue(e){if(this.readResolve){let t=this.readResolve;this.readResolve=void 0,this.readReject=void 0,t({done:!1,value:e})}else this.queue.push(e)}done(){if(this.isDone=!0,this.readResolve){let e=this.readResolve;this.readResolve=void 0,this.readReject=void 0,e({done:!0,value:void 0})}}error(e){if(this.hasError=e,this.readReject){let t=this.readReject;this.readResolve=void 0,this.readReject=void 0,t(e)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}constructor(e){this.returned=e,this.queue=[],this.isDone=!1,this.started=!1}}function A(e,t){let{data:n,isLoading:a,refetch:r}=_(e,!1),{inputStream:i,streamedMessages:l}=function(e,t,n){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=(0,u.useRef)(null),l=(0,u.useRef)(null),c=(0,u.useRef)(null),[d,m]=(0,u.useState)([]);(0,u.useEffect)(()=>{m([])},[e]);let p=(0,u.useRef)(null);(0,u.useEffect)(()=>{p.current=t},[t]);let{activeOrganization:f}=(0,s.YL)(),g=null==f?void 0:f.uuid,v=(0,u.useCallback)(()=>{l.current&&(l.current.abort(),l.current=null),c.current&&(c.current.done(),c.current=null),i.current=null},[]),h=(0,u.useCallback)(()=>{if(!a||!g||!e)return;v(),l.current=new AbortController,c.current=new w;let t=(0,o.P)({prompt:c.current,websocket:{url:j(g,e)},abortController:l.current});(async()=>{try{for await(let n of t){var e=p.current;if("result"===n.type&&"granted"===Notification.permission){let t=new Notification(e?"Claude updated ".concat(e):"Update from Claude",{body:"Your task is ready for review",icon:"/favicon.svg",badge:"/favicon.svg"});t.onclick=()=>{window.focus(),t.close()}}m(e=>[...e,n])}}catch(e){r&&e instanceof Error&&"WebSocket connection aborted by user"!==e.message&&h()}})(),n(),i.current=t},[a,g,e,v,n,p,r]);return(0,u.useEffect)(()=>{h()},[h]),(0,u.useEffect)(()=>()=>v(),[v]),{inputStream:c.current,streamedMessages:d}}(e,t,r),c=(0,u.useMemo)(()=>a||!n?[]:n.data,[a,n]),d=(0,u.useMemo)(()=>{let e=new Set;for(let t of c)e.add(t.uuid);return e},[c]);return{loadingInitialMessages:a,inputStream:i,messages:(0,u.useMemo)(()=>{let e=[...c];for(let t of l)t.uuid&&!d.has(t.uuid)&&e.push(t);return e},[c,d,l])}}},20878:(e,t,n)=>{n.d(t,{W:()=>i});var a=n(68096),s=n(1761),r=n(7620);function i(){let{mutate:e,isPending:t}=(0,a.Jy)(),{account:n}=(0,s.YL)();return{dismiss:(0,r.useCallback)(t=>{var a,s,r;n&&(null!=n&&null!=(s=n.settings)&&null!=(a=s.dismissed_claudeai_banners)&&a.some(e=>e.banner_id===t)||e({...n.settings,dismissed_claudeai_banners:[...(null==n||null==(r=n.settings)?void 0:r.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]}))},[n,e]),isDismissed:(0,r.useCallback)(e=>{var t,a;return(null==n||null==(a=n.settings)||null==(t=a.dismissed_claudeai_banners)?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isPending:t}}},22364:(e,t,n)=>{n.d(t,{P:()=>v});var a=n(54568),s=n(1761),r=n(15046),i=n(41417),l=n(56370),o=n(12072),c=n(27062),u=n(60265),d=n(99272),m=n(32987),p=n(62971),f=n(92947),g=n(45078);function v(e){var t,n;let{tool:v,server:h,children:y}=e,{account:x}=(0,s.YL)(),b=null!=(n=null==x||null==(t=x.settings)?void 0:t.enabled_mcp_tools)?n:{},j=(0,g.v)("enabled_mcp_tools")||{},{value:_}=(0,c.fS)("claude_ai_sticky_project_settings");_&&(b=j);let{toggleMcpToolEnabled:w,toggleMcpToolAlwaysApproved:A}=(0,f.es)(),{getApprovalSetting:C}=(0,f.BN)(),S=C(h.name,v),M="never"===S,N="always"===S,L=v.enabledKey,z=(e,t,n)=>(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[t,(0,a.jsx)("p",{className:"text-sm text-text-400",children:n})]}),(0,a.jsx)(u.J,{size:16,className:(0,m.A)("shrink-0",e?"opacity-1":"opacity-0")})]}),k=(0,a.jsx)(i.$,{variant:"outline",disabled:!1===b[L]||N,append:(0,a.jsx)(d.a,{size:16}),className:"!min-w-[200px] flex justify-between items-center",children:"never"===S?(0,a.jsx)(p.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}):(0,a.jsx)(p.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"})});return(0,a.jsxs)("div",{className:"flex flex-row gap-4 flex-shrink-0",children:[(0,a.jsx)("label",{children:(0,a.jsx)(r.j,{checked:!1!==b[L],onChange:e=>w(L,e.target.checked,h.url)})}),(0,a.jsx)("div",{className:"flex flex-grow",children:y}),(0,a.jsxs)(l.ms,{unstyledTrigger:!0,align:"start",trigger:N?(0,a.jsx)(o.Tooltip,{side:"top",tooltipContent:(0,a.jsx)(p.A,{defaultMessage:"Setting manged by your organization",id:"+y38sDfyun"}),children:(0,a.jsx)("div",{children:k})}):k,children:[(0,a.jsx)(l.tJ,{onClick:()=>{A(v.alwaysApprovedKey,!1)},children:z(!M,(0,a.jsx)(p.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"}),(0,a.jsx)(p.A,{defaultMessage:"Your approval is required every time",id:"Ne5BQmk7c1"}))}),(0,a.jsx)(l.tJ,{onClick:()=>{A(v.alwaysApprovedKey,!0)},children:z(M,(0,a.jsx)(p.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}),(0,a.jsx)(p.A,{defaultMessage:"Your approval is not required",id:"9AbpSd6OJA"}))})]})]})}},22389:(e,t,n)=>{n.d(t,{r:()=>w,z:()=>A});var a=n(54568),s=n(41417),r=n(56370),i=n(90119),l=n(96377),o=n(32987),c=n(7620),u=n(46760),d=n(25465),m=n(37076),p=n(4705),f=n(62971);function g(e){let{platform:t,onClose:n,onConfirm:r,loading:i}=e,l=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:n,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-danger-000",children:[(0,a.jsx)(p.N,{size:20,weight:"bold"}),(0,a.jsx)(f.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(f.A,{defaultMessage:"Are you sure you want to disable the Canvas instance ‘{platformName}’?",id:"5Sw2NbmZOi",values:{platformName:t.name||l}})}),(0,a.jsxs)("div",{className:"p-3 bg-danger-100 border border-danger-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(f.A,{defaultMessage:"This action will:",id:"zvWv7FFtPu"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Temporarily disable Claude access from Canvas for this instance",id:"lIEPYlaaQV"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Prevent users from launching Claude from Canvas",id:"DeUCbJxieq"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Can be re-enabled at any time without reconfiguration",id:"wnmm8Q2qIC"})})]})]}),(0,a.jsx)("p",{className:"text-text-200 text-sm",children:(0,a.jsx)(f.A,{defaultMessage:"This Canvas instance will remain configured and can be re-enabled at any time.",id:"a5jT7TDFXC"})})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(s.$,{variant:"danger",onClick:()=>r(t.id),loading:i,children:(0,a.jsx)(f.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})}),(0,a.jsx)(s.$,{variant:"secondary",onClick:n,children:(0,a.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var v=n(42952),h=n(17937);function y(e){let{platform:t,onClose:n,onConfirm:r,loading:i}=e,l=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:n,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-accent-secondary-000",children:[(0,a.jsx)(h.r,{size:20,weight:"bold"}),(0,a.jsx)(f.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(f.A,{defaultMessage:"Are you sure you want to enable the Canvas instance ‘{platformName}’?",id:"sltSpK2pM1",values:{platformName:t.name||l}})}),(0,a.jsxs)("div",{className:"p-3 bg-accent-main-100 border border-accent-main-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(f.A,{defaultMessage:"This will:",id:"+yrIUjrxTS"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Restore Claude access from Canvas for this instance",id:"6gypIwnFmn"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Allow users to launch Claude from Canvas again",id:"/aTphs8E3Z"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"Reactivate the LTI integration for all users in your organization",id:"jX7w8Etxw8"})})]})]})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(s.$,{variant:"primary",onClick:()=>r(t.id),loading:i,children:(0,a.jsx)(f.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})}),(0,a.jsx)(s.$,{variant:"secondary",onClick:n,children:(0,a.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var x=n(82258),b=n(82010),j=n(64707),_=n(15989),w=function(e){return e[e.TOOLS=0]="TOOLS",e[e.DISCONNECT=1]="DISCONNECT",e[e.REMOVE=2]="REMOVE",e[e.DISABLE=3]="DISABLE",e[e.EDIT_CANVAS=4]="EDIT_CANVAS",e[e.DISABLE_CANVAS=5]="DISABLE_CANVAS",e[e.ENABLE_CANVAS=6]="ENABLE_CANVAS",e}({});function A(e){let{type:t,server:n,actions:m}=e,p=(0,u.A)(),f=(0,i.V)(),[h,w]=(0,c.useState)(void 0),A=()=>w(void 0),{data:C}=(0,d.sr)(),S=(0,d.oo)({onSuccess:A}),M=(0,d.Ks)({onSuccess:A}),N=(0,d.LK)({onSuccess:A}),L=null==C?void 0:C[0];if(0===m.length)return;let z={0:p.formatMessage({defaultMessage:"Tools and settings",id:"8a8L0qsqhm"}),1:p.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"}),3:p.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),2:p.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),4:p.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),5:p.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),6:p.formatMessage({defaultMessage:"Enable",id:"TqSTI0/TZI"})},k=null;switch(h){case 0:k=(0,a.jsx)(_.J,{server:n,onClose:A});break;case 1:k=(0,a.jsx)(b.m,{type:t,server:n,onClose:A});break;case 3:k=(0,a.jsx)(x.u,{type:t,onClose:A});break;case 2:k=(0,a.jsx)(j.f,{server:n,onClose:A});break;case 4:k=L?(0,a.jsx)(v.S,{platform:L,onClose:A,onSubmit:(e,t,n,a)=>{S.mutate({platformId:e,canvas_url:t,client_id:n,name:"".concat(t," Canvas"),deployment_ids:[a]})},loading:S.isPending}):null;break;case 5:k=L?(0,a.jsx)(g,{platform:L,onClose:A,onConfirm:e=>{N.mutate({platformId:e,is_active:!1})},loading:N.isPending}):null;break;case 6:k=L?(0,a.jsx)(y,{platform:L,onClose:A,onConfirm:e=>{M.mutate({platformId:e,is_active:!0})},loading:M.isPending}):null}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.ms,{align:"end",trigger:(0,a.jsx)(s.$,{size:"icon",variant:"outline","aria-label":n?p.formatMessage({defaultMessage:"More options for {label}",id:"rKQPgfPvWS"},{label:n.name}):p.formatMessage({defaultMessage:"More options",id:"IzCVhGdYVc"}),children:(0,a.jsx)(l.H,{size:16,weight:"bold"})}),children:m.map(e=>(0,a.jsx)(r.tJ,{className:(0,o.A)("min-w-[175px]",[1,3,2,5].includes(e)&&"text-danger-000"),onClick:()=>{if(2===e&&(null==n?void 0:n.type)==="local"&&f){var t,a;null==(a=window.claudeAppBindings)||null==(t=a.openMcpSettings)||t.call(a,n.name)}else w(e)},children:z[e]},e))}),k]})}},24644:(e,t,n)=>{n.d(t,{E:()=>l});var a=n(54568),s=n(15964),r=n(46760),i=n(62971);function l(e){let{domain:t,setDomain:n,clientId:l,setClientId:o,deploymentId:c,setDeploymentId:u}=e,d=(0,r.A)();return(0,a.jsxs)("div",{className:"flex flex-col gap-3 mt-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(s.ks,{required:!0,label:d.formatMessage({defaultMessage:"Canvas Domain",id:"Aok65+sKzA"}),placeholder:d.formatMessage({defaultMessage:"https://school.instructure.com or https://canvas.myschool.edu",id:"VAjV+8SnM6"}),value:t,onValueChange:e=>n(e||""),onBlur:()=>n(t.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"Enter your Canvas domain (e.g., ‘https://school.instructure.com’ for hosted Canvas or ‘https://canvas.myschool.edu’ for self-hosted)",id:"uFbHowgMW9"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(s.ks,{required:!0,label:d.formatMessage({defaultMessage:"Client ID",id:"U5+MBCY8VU"}),placeholder:d.formatMessage({defaultMessage:"00000000000000",id:"BLrL/pjQgI"}),value:l,onValueChange:e=>o(e||""),onBlur:()=>o(l.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"The Client ID from your Canvas LTI app registration (found in Canvas Admin > Developer Keys)",id:"iV5X/WX6MA"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(s.ks,{required:!0,label:d.formatMessage({defaultMessage:"Deployment ID",id:"/h+RD9WlzS"}),placeholder:d.formatMessage({defaultMessage:"1",id:"Tf9Oo0DwqC"}),value:c,onValueChange:e=>u(e||""),onBlur:()=>u(c.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"The Deployment ID for your Canvas LTI integration",id:"iLMNAW31CI"})})]})]})}},25465:(e,t,n)=>{n.d(t,{AW:()=>d,Ks:()=>p,LK:()=>f,oo:()=>m,sr:()=>u});var a=n(77186),s=n(1761),r=n(65631),i=n(27062),l=n(87606);let o="lti_platforms";function c(){let{value:e}=(0,i.fS)("claude_ai_velvet_accordion");return e}let u=()=>{let{activeOrganization:e,account:t}=(0,s.YL)(),n=null==e?void 0:e.uuid,i=(0,r.yI)(t,e,r.Nt.OrganizationManage),l=c();return(0,a.Sk)("/api/organizations/".concat(n,"/lti/platforms"),{queryKey:[o,{orgUUID:n}],enabled:!!e&&!!n&&i&&l})},d=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,s.YL)(),r=null==n?void 0:n.uuid,i=c();return(0,a.L2)("/api/organizations/".concat(r,"/lti/platforms"),"PUT",{enabled:i,onSuccess:e=>{t.setQueryData([o,{orgUUID:r}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[o]})},onSettled:(e,n)=>{e&&!n&&(t.setQueryData([o,{orgUUID:r}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[o]}))},...e})},m=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,s.YL)(),r=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(r,"/lti/platforms/").concat(t)},"POST",{enabled:i,onSuccess:(e,n)=>{t.setQueryData([o,{orgUUID:r}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[o]})},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([o,{orgUUID:r}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})},p=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,s.YL)(),r=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(r,"/lti/platforms/").concat(t)},"POST",{enabled:i,onMutate:e=>e,onSuccess:(e,n)=>{t.setQueryData([o,{orgUUID:r}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[o]})},onError:()=>{},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([o,{orgUUID:r}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})},f=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,s.YL)(),r=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(r,"/lti/platforms/").concat(t)},"POST",{enabled:i,onMutate:e=>e,onSuccess:(e,n)=>{t.setQueryData([o,{orgUUID:r}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[o]})},onError:()=>{},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([o,{orgUUID:r}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})}},42952:(e,t,n)=>{n.d(t,{S:()=>c});var a=n(54568),s=n(41417),r=n(37076),i=n(7620),l=n(62971),o=n(24644);function c(e){var t;let{platform:n,onClose:c,onSubmit:u,loading:d}=e,[m,p]=(0,i.useState)(n.issuer),[f,g]=(0,i.useState)(n.client_id),[v,h]=(0,i.useState)((null==(t=n.deployment_ids)?void 0:t[0])||""),y=!m.trim()||!f.trim()||!v.trim();return(0,a.jsx)(r.aF,{isOpen:!0,onClose:c,modalSize:"xl",title:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)(l.A,{defaultMessage:"Edit Canvas Instance",id:"aBsNZWVKN+"})}),subtitle:(0,a.jsx)(l.A,{defaultMessage:"Update your Canvas LMS instance configuration",id:"FqSEGC5V7F"}),children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y||u(n.id,m.trim().replace(/\/$/,""),f.trim(),v.trim())},className:"flex flex-col",children:[(0,a.jsx)(o.E,{domain:m,setDomain:p,clientId:f,setClientId:g,deploymentId:v,setDeploymentId:h}),(0,a.jsxs)(r.vW,{children:[(0,a.jsx)(s.$,{type:"submit",loading:d,disabled:y,children:(0,a.jsx)(l.A,{defaultMessage:"Save Changes",id:"3VI9mt1zm0"})}),(0,a.jsx)(s.$,{variant:"secondary",onClick:c,children:(0,a.jsx)(l.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})})}},44077:(e,t,n)=>{n.d(t,{R:()=>l});var a=n(54568),s=n(7620),r=n(41417),i=n(37076);let l=(0,s.memo)(e=>{let{isOpen:t,onClose:n,onConfirm:l,title:o,message:c,confirmText:u="Confirm",cancelText:d="Cancel",variant:m="primary",isLoading:p,disabled:f=!1,autoFocus:g=!0,testId:v,children:h,size:y="sm"}=e,[x,b]=(0,s.useState)(!1),j=null!=p?p:x,_=(0,s.useCallback)(async()=>{if(!f&&!j){b(!0);try{let e=l();e&&"function"==typeof e.then&&await e,n()}finally{b(!1)}}},[l,n,f,j]),w=(0,s.useCallback)(()=>{j||n()},[n,j]);return(0,a.jsxs)(i.aF,{isOpen:t,onClose:w,title:o,modalSize:y,closeOnEscapeKeydown:!j,children:[(0,a.jsxs)("div",{className:"mt-1 mb-2",children:[c&&(0,a.jsx)("div",{className:"text-text-300 whitespace-pre-line",children:c}),h]}),(0,a.jsxs)(i.vW,{children:[(0,a.jsx)(r.$,{variant:"secondary",onClick:w,disabled:j,children:d}),(0,a.jsx)(r.$,{variant:"danger"===m?"danger":"primary",onClick:_,disabled:f||j,loading:j,autoFocus:g,"data-testid":v||"confirmation-modal-confirm",children:u})]})]})});l.displayName="ConfirmationModal"},45270:(e,t,n)=>{n.d(t,{Ou:()=>v,Xd:()=>h});var a=n(17411),s=n(27062),r=n(77101),i=n(37428),l=n(21036),o=n(25465),c=n(85717),u=n(65671),d=n(57934),m=n(45715),p=n(91768),f=n(22389);function g(){let{value:e}=(0,s.fS)("kingfisher_enabled"),t=(0,c.LP)(),{isDriveAuthenticated:n}=(0,c.cI)(),{value:a}=(0,s.fS)("pumpernickel_enabled"),i=(0,p.Ys)(r.v8.GMAIL),{isAuthenticated:o}=(0,p.ob)(r.v8.GMAIL),u=(0,p.Ys)(r.v8.GCAL),{isAuthenticated:d}=(0,p.ob)(r.v8.GCAL),m=(0,p.Ys)(r.v8.SLACK),{isAuthenticated:f}=(0,p.ob)(r.v8.SLACK),g=(0,l.useLayer)("trials_freemium").get("free_integrations",!1);return{[r.v8.GDRIVE]:{type:r.v8.GDRIVE,available:e||g,enabledForOrg:t,connected:n},[r.v8.GMAIL]:{type:r.v8.GMAIL,available:a||g,enabledForOrg:i,connected:o},[r.v8.GCAL]:{type:r.v8.GCAL,available:a||g,enabledForOrg:u,connected:d},[r.v8.SLACK]:{type:r.v8.SLACK,available:m,enabledForOrg:m,connected:f}}}let v=g;function h(){let e=Object.values(g()),t=(0,d.Cq)(),{isGithubAuthenticated:n}=(0,d.nB)({fetchImmediately:!0}),l=(0,i.wc)()[i.j$]||"invalid",{data:c}=(0,a.Jh)(l),v=c&&c.length>0,{value:h}=(0,s.fS)("spider_enabled_2"),y=(0,m.AI)(),{isOutlineAuthenticated:x}=(0,m.I5)(),{value:b}=(0,s.fS)("cinnabon_enabled"),j=(0,p.Ys)(r.v8.SALESFORCE),{isAuthenticated:_}=(0,p.ob)(r.v8.SALESFORCE),w=(0,p.Ys)(r.v8.ASANA),{isAuthenticated:A}=(0,p.ob)(r.v8.ASANA),{value:C}=(0,s.fS)("claude_ai_ember"),{value:S}=(0,s.fS)("claude_ai_velvet_accordion"),{data:M}=(0,o.sr)(),N=((null==M?void 0:M.filter(e=>e.is_active))||[]).length>0,L=(0,u.w5)(),{isAuthenticated:z}=(0,u.eF)();return[...e,...v?[{type:r.v8.CUTTLEFISH,available:!0,enabledForOrg:!0,connected:!0}]:[],{type:r.v8.GITHUB,available:!0,enabledForOrg:t,connected:n},{type:r.v8.OUTLINE,available:h&&!1,enabledForOrg:y,connected:x},{type:r.v8.SALESFORCE,available:b,enabledForOrg:j,connected:_},{type:r.v8.ASANA,available:b,enabledForOrg:w,connected:A},{type:r.v8.FIDDLEHEAD,available:!1,enabledForOrg:L,connected:z},{type:r.v8.CANVAS,available:C&&S&&!0,enabledForOrg:N,connected:N,connectedActions:N?[f.r.EDIT_CANVAS,f.r.DISABLE_CANVAS]:[],disconnectedActions:[]}].filter(e=>e.available)}},45715:(e,t,n)=>{n.d(t,{AI:()=>c,I5:()=>u,n0:()=>o,qp:()=>d,so:()=>m});var a=n(77186),s=n(1761),r=n(71473);n(77101);var i=n(87606);n(7620);var l=n(91768);let o=e=>{let{uri:t}=e,{data:n,isLoading:i}=(e=>{let{documentId:t}=e,{account:n,activeOrganization:i}=(0,s.YL)(),l=null==n?void 0:n.uuid,o=null==i?void 0:i.uuid,u=c();return(0,a.Sk)("/api/organizations/".concat(o,"/sync/mcp/outline/document/").concat(t),{queryKey:[r.hq,{accountUUID:l,orgUUID:o,documentId:t}],enabled:u})})({documentId:t});return{title:null==n?void 0:n.title,isLoading:i}},c=()=>{let{data:e}=(0,l.LN)();return!1},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,s.YL)(),i=null==n?void 0:n.uuid,l=c(),{data:o,refetch:u}=(0,a.Sk)("/api/organizations/".concat(i,"/sync/mcp/outline/auth"),{queryKey:[r.iP,{accountUUID:null==t?void 0:t.uuid,orgUUID:i}],enabled:!!(n&&l),staleTime:5e3}),{mutate:d,isPending:m}=(0,a.L2)("/api/organizations/".concat(i,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(n&&l),...e,onSuccess:function(){for(var t,n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];null==(t=e.onSuccess)||t.call(e,...a)}});return{isOutlineAuthenticated:!!(null==o?void 0:o.is_authenticated),refetch:u,initOutlineAuth:d,isLoadingOutlineAuthInit:m}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,s.YL)(),l=null==t?void 0:t.uuid,o=null==n?void 0:n.uuid,u=c(),d=(0,i.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(o,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(n&&u),...e,onSuccess:function(){for(var t,n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];d.invalidateQueries({queryKey:[r.iP,{accountUUID:l,orgUUID:o}]}),null==(t=e.onSuccess)||t.call(e,...a)}})},m=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/connectors?redirect_url=".concat(e,"&open_outline_auth=true")}},57934:(e,t,n)=>{n.d(t,{tn:()=>_,nB:()=>v,rW:()=>h,Cq:()=>y,JR:()=>j,b4:()=>x,yL:()=>b});var a=n(77186),s=n(1761),r=n(71473),i=n(77101),l=n(90119),o=n(87606),c=n(62942),u=n(7620),d=n(18900);async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{fallbackDelayMs:n=1e3,allowedDomains:a=[]}=t;if(!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let n=new URL(e,window.location.origin);if(n.origin===window.location.origin)return!0;if(t.length>0)return"https:"===n.protocol&&t.some(e=>n.hostname===e||n.hostname.endsWith(".".concat(e)));return!1}catch(e){return!1}}(e,a))throw Error("Invalid redirect URL: ".concat(e));try{let t=window.open(e,"_blank","noopener,noreferrer");if(!t||t.closed||void 0===t.closed)return await new Promise(e=>setTimeout(e,n)),window.location.href=e,!1;return!0}catch(t){return await new Promise(e=>setTimeout(e,n)),window.location.href=e,!1}}var p=n(91768),f=n(40459);let g="github_success",v=function(){var e;let{callerIdentifier:t,toggleGithubModalOpen:n,fetchImmediately:i=!1,pathname:o,queryString:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:f}=(0,s.YL)(),v=null==f?void 0:f.uuid,h=y(),[x,b]=(0,u.useState)(i),j=(e=>{let{shouldFetch:t=!1}=e,{activeOrganization:n}=(0,s.YL)(),i=null==n?void 0:n.uuid,l=y();return(0,a.Sk)("/api/organizations/".concat(i,"/sync/github/auth"),{queryKey:[r.Hv,{orgUUID:i}],enabled:!!(t&&n&&l)})})({shouldFetch:x}),_=(0,u.useCallback)(async()=>{var e,t;return x?null==(t=j.data)?void 0:t.is_authenticated:(b(!0),null==(e=(await j.refetch()).data)?void 0:e.is_authenticated)},[j,x]),{mutate:w}=(0,a.L2)("/api/organizations/".concat(v,"/sync/github/auth/start"),"POST",{enabled:!!(f&&h),onSuccess:e=>{m(e.redirect_url,{allowedDomains:["github.com","api.github.com"]})}}),A="".concat(g,"=").concat(t).concat(d?"&".concat(d):"");(0,p.FZ)({callerIdentifier:t,successParam:g,handleOpen:()=>{null==n||n(!0)}});let C=(0,c.useSearchParams)(),S=(0,l.V)(),M=(0,u.useRef)(!1),N=(0,c.usePathname)(),L=(0,p.dH)({pathname:o||N,searchParams:C,queryString:A,isClaudeApp:S});return{checkIsGithubAuthenticated:_,initGithubAuth:()=>{if(h){if(S)return void window.open("/settings/connectors?open_in_browser=1&auth_start=github&origin=".concat(L));M.current||(M.current=!0,w({pre_auth_state:{origin:L}}))}},isGithubAuthenticated:null==(e=j.data)?void 0:e.is_authenticated,isLoading:j.isLoading}},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,i=y(),l=(0,o.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/sync/github/auth"),"DELETE",{enabled:!!(t&&i),...e,onSuccess:function(){for(var t,a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];l.invalidateQueries({queryKey:[r.Hv,{orgUUID:n}]}),null==(t=e.onSuccess)||t.call(e,...s)}})},y=()=>{let{data:e}=(0,p.LN)(),t=(0,s.mV)(),n=!!(Array.isArray(e)&&e.find(e=>e.type===i.v8.GITHUB&&e.enabled));return!!(!f.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!t||n))},x=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=y();return(0,a.Sk)("/api/organizations/".concat(t,"/sync/github/repos"),{queryKey:[r.jL,{orgUUID:t}],enabled:!!(e&&n),meta:{noToast:!0}})},b=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=y();return(0,a.Sk)("/api/organizations/".concat(t,"/code/repos"),{queryKey:["SYNC_GH_REPOS_WITH_STATUS_QUERY_KEY",{orgUUID:t}],enabled:!!(e&&t&&n),meta:{noToast:!0}})};function j(){let e=(0,d.iB)();return(0,u.useCallback)(t=>{var n,a,s;return e?null==(n=t.status)?void 0:n.app_installed:(null==(a=t.status)?void 0:a.workflow_enabled)===!0&&(null==(s=t.status)?void 0:s.app_installed)===!0},[e])}let _=e=>{var t;let{owner:n,repo:i,branch:l}=e,o=(e=>{let{owner:t,repo:n,branch:i}=e,{activeOrganization:l}=(0,s.YL)(),o=null==l?void 0:l.uuid,c=y(),u=new URLSearchParams({owner:null!=t?t:"",repo:null!=n?n:""}).toString();return(0,a.Sk)("/api/organizations/".concat(o,"/sync/github/repo?").concat(u),{queryKey:[r.yB,{orgUUID:o,owner:t,repo:n}],enabled:!!(t&&n&&!i&&l&&c),meta:{noToast:!0}})})({owner:n,repo:i,branch:l}),c=(e=>{let{owner:t,repo:n,branch:i}=e,{activeOrganization:l}=(0,s.YL)(),o=null==l?void 0:l.uuid,c=y();return(0,a.Sk)("/api/organizations/".concat(o,"/sync/github/repo/").concat(t,"/").concat(n,"/tree/").concat(i),{queryKey:[r.o6,{orgUUID:o,owner:t,repo:n,branch:i}],staleTime:3e5,enabled:!!(t&&n&&i&&l&&c),meta:{noToast:!0}})})({owner:n,repo:i,branch:l||(null==(t=o.data)?void 0:t.default_branch)});return{data:{repo:o.data,tree:c.data},isFetching:o.isFetching||c.isFetching,error:o.error||c.error}}},64707:(e,t,n)=>{n.d(t,{f:()=>d});var a=n(54568),s=n(1761),r=n(69916),i=n(41417),l=n(37076),o=n(46760),c=n(62971),u=n(70659);function d(e){var t;let{onClose:n,server:d}=e,m=(0,o.A)(),p=(0,s.mV)(),{activeOrganization:f}=(0,s.YL)(),{addError:g}=(0,r.Y)(),v=d.name,{mutate:h,isPending:y}=(0,u.ll)((null==f?void 0:f.uuid)||"",null!=(t=d.uuid)?t:"",{onSuccess:n,onError:e=>{g(m.formatMessage({defaultMessage:"Failed to disconnect server",id:"zX14mjXCQK"}),{error:e})}});return(0,a.jsxs)(l.aF,{isOpen:!0,onClose:n,title:p?m.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:v}):m.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:v}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:v}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(c.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:v}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:v}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(c.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),(0,a.jsxs)(l.vW,{layout:"right",children:[(0,a.jsx)(i.$,{onClick:n,variant:"secondary",children:(0,a.jsx)(c.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(i.$,{loading:y,onClick:()=>h(),variant:"danger",children:(0,a.jsx)(c.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}},65671:(e,t,n)=>{n.d(t,{Qp:()=>d,eF:()=>u,w5:()=>c});var a=n(77186),s=n(1761),r=n(27062),i=n(37428),l=n(87606),o=n(62942);let c=()=>(0,r.fS)("fiddlehead").value,u=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=c(),r=(0,i.wc)(),{data:l,isFetched:u}=(0,a.Sk)("/api/oauth/organizations/".concat(t,"/oauth_tokens"),{enabled:!!(t&&n),staleTime:3e5}),d=(0,o.useSearchParams)().get("debug_fiddlehead_auth_override"),m=r[i.me],p=m&&(null==l?void 0:l.some(e=>e.application_name===m));return{isAuthenticated:null!==d?"1"===d:p,isFetched:u,initAuth:()=>{window.open(r[i.vf],"_blank")}}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,r=c(),i=(0,l.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/fiddlehead/disconnect_and_delete_all"),"POST",{enabled:!!(t&&r),...e,onSuccess:function(){for(var t,a=arguments.length,s=Array(a),r=0;r<a;r++)s[r]=arguments[r];i.invalidateQueries({queryKey:["/api/oauth/organizations/".concat(n,"/oauth_tokens")]}),null==(t=e.onSuccess)||t.call(e,...s)}})}},70659:(e,t,n)=>{n.d(t,{vW:()=>M,R4:()=>S,qb:()=>j,ll:()=>_,eB:()=>b,W3:()=>w,lu:()=>y,p9:()=>x,p4:()=>C});var a=n(98518),s=n(77186),r=n(1761),i=n(69916),l=n(71473),o=n(27062),c=n(44180),u=n(87606),d=n(7620),m=n(75006),p=n(57383),f=n(16253),g=n(62370);function v(e){let t=window.atob(e),n=new ArrayBuffer(t.length),a=new Uint8Array(n);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return n}let h=m.Ay.object({uuid:m.Ay.string().uuid(),name:m.Ay.string(),url:m.Ay.string(),created_at:m.Ay.string().datetime(),updated_at:m.Ay.string().datetime(),custom_oauth_client_id:m.Ay.string().nullable().optional(),custom_oauth_client_secret:m.Ay.string().nullable().optional(),is_authenticated:m.Ay.boolean().default(!1)}),y=()=>{let{value:e}=(0,o.fS)("papi_mcp");return e},x=()=>{let{value:e}=(0,o.fS)("papi_mcp_remote");return e};function b(e,t){let n=y(),a=x();return(0,s.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[l.lA,e],enabled:!a&&n&&!!e,...t,select:e=>m.z.array(h).parse(e)})}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,{track:r}=(0,a.st)(),i=(0,u.useQueryClient)(),o=x();return(0,s.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(a,s,c)=>{var u;o&&A(i,e,a.uuid,"create",a),i.invalidateQueries({queryKey:[l.lA,e]}),i.invalidateQueries({queryKey:[l.qE,e]}),null==(u=t.onSuccess)||u.call(t,a,s,c),r({event_key:"claudeai.mcp.create_server",source:n.source,url:a.url,type:"remote"})}})}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.useQueryClient)(),r=x();return(0,s.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...n,onSettled:()=>{(0,g.eg)(t)},onSuccess:(s,i,o)=>{var c;r&&A(a,e,t,"delete"),a.invalidateQueries({queryKey:[l.lA,e]}),a.invalidateQueries({queryKey:[l.qE,e]}),null==(c=n.onSuccess)||c.call(n,s,i,o)}})}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.useQueryClient)(),r=x();return(0,s.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...n,onSettled:()=>{(0,g.Ug)(t)},onSuccess:(s,i,o)=>{var c;r&&A(a,e,t,"logout",{connected:!1,tools:[],prompts:[],resources:[]}),a.invalidateQueries({queryKey:[l.lA,e]}),a.invalidateQueries({queryKey:[l.qE,e]}),null==(c=n.onSuccess)||c.call(n,s,i,o)}})}async function A(e,t,n,a,s){try{e.setQueryData([l.$d,t],e=>{let t=null!=e?e:[];switch(a){case"create":return[...t,s].sort((e,t)=>e.name.localeCompare(t.name));case"update":case"logout":return t.map(e=>e.uuid===n?{...e,...s}:e).sort((e,t)=>e.name.localeCompare(t.name));case"delete":return t.filter(e=>e.uuid!==n)}});let r=await fetch("/api/organizations/".concat(t,"/mcp/bootstrap")),i=await r.json();e.setQueryData([l.$d,t],i)}catch(e){(0,c.Cp)(e,{tags:{action:"updateBootstrapData"},extra:{orgUuid:t,action:a,serverUuid:n}})}}function C(e){let t=x(),{activeOrganization:n}=(0,r.YL)(),a=null==n?void 0:n.uuid;return(0,s.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!a&&t})}function S(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=x(),{activeOrganization:n}=(0,r.YL)(),a=null==n?void 0:n.uuid;return(0,s.L2)("/api/organizations/".concat(a,"/mcp/attach_resource"),"POST",{enabled:t&&!!a,...e})}(),t=N(),{addError:n}=(0,i.Y)(),l=x(),o=function(){let{addError:e}=(0,i.Y)(),{track:t}=(0,a.st)(),{handleUpload:n}=(0,p.oM)();return(0,d.useCallback)(async(a,s)=>{try{let e=(await (0,g.KU)(a).readResource({uri:s.uri},{timeout:15e3})).contents.map(e=>{let n;return"text"in e?(n=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(n=v(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([n],s.name,{type:e.mimeType})});e.length>0&&await n(e)}catch(t){e("Failed to upload resource. You can try again.",{error:t})}},[t,e,n])}();return(0,d.useCallback)(async a=>{let{serverUuid:s,resource:r,onClose:i}=a;if(!l)return o(s,r);try{let n=(0,g.KU)(s),a=await n.readResource({uri:r.uri},{timeout:15e3}),l=await e({resource:r,server_uuid:s,result:a});t(l),null==i||i()}catch(e){n("Failed to attach resource. You can try again.",{error:e,errorContext:{tags:{action:"attach_resource"},extra:{serverUuid:s}}})}},[e,t,n,l,o])}function M(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=x(),{activeOrganization:n}=(0,r.YL)(),a=null==n?void 0:n.uuid;return(0,s.L2)("/api/organizations/".concat(a,"/mcp/attach_prompt"),"POST",{enabled:t&&!!a,...e})}(),n=N(),{addError:l}=(0,i.Y)(),o=x(),c=function(e){let{track:t}=(0,a.st)(),{addError:n}=(0,i.Y)(),{handleUpload:s}=(0,p.oM)();return(0,d.useCallback)(async(a,r,i)=>{try{let n=await (0,g.KU)(a).getPrompt({name:r.name,arguments:i},{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(i).length,assistant_messages:n.messages.filter(e=>"assistant"===e.role).length,user_messages:n.messages.filter(e=>"user"===e.role).length,text_messages:n.messages.filter(e=>"text"===e.content.type).length,image_messages:n.messages.filter(e=>"image"===e.content.type).length});let l=(e,t)=>{let n=e=>{let t=f._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},a=e=>"".concat(r.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],a("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([v(e.content.data)],a(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var s;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(s=t.mimeType)?s:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let a=n(t.mimeType);return new File([v(t.blob)],"".concat(t.uri,".").concat(a),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===n.messages.length)await s([l(n.messages[0],0)]);else if(n.messages.length>1){let e=n.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[l(e,t)]:[]),t=n.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let n=JSON.stringify(t,null,2);e.push(new File([n],"".concat(r.name,"_messages.json"),{type:"application/json"}))}await s(e)}null==e||e()}catch(e){n("Failed to get prompt. You can try again.",{error:e})}},[t,n,s,e])}(e);return(0,d.useCallback)(async a=>{let{serverUuid:s,prompt:r,args:i}=a;if(!o)return c(s,r,i);try{let a=(0,g.KU)(s),l=await a.getPrompt({name:r.name,arguments:i},{timeout:15e3}),o=await t({prompt:r,arguments:i,server_uuid:s,result:l});n(o),null==e||e()}catch(e){l("Failed to attach prompt. You can try again.",{error:e,errorContext:{tags:{action:"attach_prompt"},extra:{serverUuid:s}}})}},[t,n,l,e,o,c])}function N(){let{setAttachments:e,setFiles:t}=(0,p.oM)();return(0,d.useCallback)(n=>{let{files:a,attachments:s}=n;a&&a.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...a.filter(e=>!t.has(e.file_uuid))]}),s&&s.length>0&&e(e=>Array.from(new Set([...e,...s].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}m.z.object({name:m.z.string(),url:m.z.string(),custom_oauth_client_id:m.z.string().nullable().optional(),custom_oauth_client_secret:m.z.string().nullable().optional()}),m.z.object({name:m.z.string().optional().nullable(),url:m.z.string().optional().nullable()})},73347:(e,t,n)=>{n.d(t,{M:()=>c});var a=n(54568),s=n(41417),r=n(68711),i=n(32987),l=n(7620),o=n(62971);function c(e){let{text:t,className:n}=e,[c,u]=(0,l.useState)(!1),d=(0,l.useRef)(null),m=(0,l.useRef)(0),[p,f]=(0,l.useState)(42),g=p>42;return((0,l.useLayoutEffect)(()=>{var e;f((null==(e=d.current)?void 0:e.scrollHeight)||0)},[t]),t)?(0,a.jsxs)("div",{className:(0,i.A)("overflow-hidden relative transition-[height] duration-150 ease-in-out","text-text-300 text-sm",n),style:{height:c?p+32*!!g:40},children:[(0,a.jsx)("div",{ref:d,className:"whitespace-pre-wrap",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:t}),g&&(0,a.jsx)("div",{className:"absolute bottom-0 right-0 bg-bg-100 bottom-0",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-0 bottom-0 -left-4 w-6 bg-gradient-to-r from-transparent to-bg-100"}),(0,a.jsx)(s.$,{size:"inline",variant:"ghost",onClick:()=>{var e;let t=null==(e=d.current)?void 0:e.closest(".overflow-y-auto");!c&&t?m.current=t.scrollTop:c&&t&&t.scrollTo({top:m.current,behavior:"instant"}),u(e=>!e)},className:"font-medium flex gap-1 items-center",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{size:12,weight:"bold"}),(0,a.jsx)(o.A,{defaultMessage:"Less",id:"mFYgAXM/x4"})]}):(0,a.jsx)(o.A,{defaultMessage:"{ellipsis}More",id:"eRW5dl5m34",values:{ellipsis:"..."}})})]})})]}):null}},82010:(e,t,n)=>{n.d(t,{m:()=>h});var a=n(54568),s=n(17411),r=n(1761),i=n(69916),l=n(44077),o=n(77101),c=n(37428),u=n(46760),d=n(70659),m=n(85717),p=n(65671),f=n(57934),g=(n(45715),n(91768)),v=n(87907);function h(e){let{type:t,server:n,onClose:s}=e;if(n)return(0,a.jsx)(j,{server:n,onClose:s});switch(t){case o.v8.GITHUB:return(0,a.jsx)(y,{onClose:s});case o.v8.GDRIVE:return(0,a.jsx)(x,{onClose:s});case o.v8.OUTLINE:return;case o.v8.FIDDLEHEAD:return(0,a.jsx)(_,{onClose:s});case o.v8.CUTTLEFISH:return(0,a.jsx)(w,{onClose:s});default:return(0,a.jsx)(b,{type:t,onClose:s})}}function y(e){let{onClose:t}=e,{mutate:n,isPending:s}=(0,f.rW)();return(0,a.jsx)(A,{name:"GitHub",onDisconnect:n,disconnecting:s,onClose:t})}function x(e){let{onClose:t}=e,{mutate:n,isPending:s}=(0,m.U5)(),r=(0,u.A)();return(0,a.jsx)(A,{name:"Google Drive",onDisconnect:n,disconnecting:s,onClose:t,modalMessageOverride:r.formatMessage({defaultMessage:"You won’t be able to continue any previous chats that reference content from Google Docs.",id:"Zi7eVRnAwf"})})}function b(e){let{type:t,onClose:n}=e,{disconnect:s}=(0,g.ob)(t);return(0,a.jsx)(A,{name:(0,v.xI)(t),onDisconnect:s,disconnecting:!1,onClose:n})}function j(e){let{server:t,onClose:n}=e,s=(0,u.A)(),{activeOrganization:l}=(0,r.YL)(),{addError:o}=(0,i.Y)(),{mutate:c,isPending:m}=(0,d.W3)((null==l?void 0:l.uuid)||"",t.uuid,{onError:e=>{o(s.formatMessage({defaultMessage:"Failed to disconnect from server",id:"L488a5jdgF"}),{error:e})}});return(0,a.jsx)(A,{name:t.name,onDisconnect:c,disconnecting:m,onClose:n})}function _(e){let{onClose:t}=e,{mutate:n,isPending:s}=(0,p.Qp)(),r=(0,v.ak)(),i=(0,c.wc)(),l=i[c.BU],u=i[c.jT],d=i[c.fh];return(0,a.jsx)(A,{name:r(o.v8.FIDDLEHEAD),onDisconnect:n,disconnecting:s,onClose:t,modalMessageOverride:l,modalTitleOverride:u,modalButtonOverride:d})}function w(e){let{onClose:t}=e,{mutate:n,isPending:r}=(0,s.fH)(),i=(0,v.ak)();return(0,a.jsx)(A,{name:i(o.v8.CUTTLEFISH),onDisconnect:n,disconnecting:r,onClose:t})}function A(e){let{name:t,onDisconnect:n,disconnecting:s,onClose:r,modalMessageOverride:i,modalTitleOverride:o,modalButtonOverride:c}=e,d=(0,u.A)(),m=null!=o?o:d.formatMessage({defaultMessage:"Disconnect {integrationName}?",id:"MUrNVj88RO"},{integrationName:t}),p=null!=c?c:d.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"}),f=null!=i?i:d.formatMessage({defaultMessage:"You can still continue previous chats that reference {integrationName} content. However, Claude won’t be able to access new content or perform new tasks.",id:"tlmLidjA7e"},{integrationName:t});return(0,a.jsx)(l.R,{isOpen:!0,onClose:r,title:m,onConfirm:()=>{n(),r()},confirmText:p,variant:"danger",autoFocus:!1,message:f,size:"md",isLoading:s})}},82258:(e,t,n)=>{n.d(t,{u:()=>v});var a=n(54568),s=n(1761),r=n(41417),i=n(91926),l=n(37076),o=n(12072),c=n(77101),u=n(38583),d=n(7620),m=n(46760),p=n(62971),f=n(91768),g=n(87907);function v(e){let{type:t,onClose:n}=e,i=(0,s.mV)(),o=(0,m.A)(),{mutate:u,isPending:v}=(0,f.xc)({onSuccess:n}),[y,x]=(0,d.useState)(!1),b=(0,g.xI)(t);return(0,a.jsxs)(l.aF,{isOpen:!0,onClose:n,title:i?o.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:b}):o.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:b}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:b}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(p.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:b}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:b}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(p.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),t===c.v8.GITHUB&&(0,a.jsx)(h,{shouldDeleteOnDisable:y,setShouldDeleteOnDisable:x}),(0,a.jsxs)(l.vW,{children:[(0,a.jsx)(r.$,{onClick:n,variant:"secondary",children:(0,a.jsx)(p.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(r.$,{loading:v,onClick:()=>{u({type:t,enabled:!1,should_delete_on_disable:y}),n()},variant:"danger",children:y?(0,a.jsx)(p.A,{defaultMessage:"Disconnect and delete cached files",id:"cpicqQfn34"}):(0,a.jsx)(p.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}function h(e){let{shouldDeleteOnDisable:t,setShouldDeleteOnDisable:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsx)(i.f,{checkState:t?"checked":"unchecked",onClick:e=>{let{didCheck:t}=e;return n(t)},label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-text-200",children:(0,a.jsx)(p.A,{defaultMessage:"Permanently delete cached GitHub files",id:"QWSlg2jyOj"})}),(0,a.jsx)(o.Tooltip,{tooltipContent:(0,a.jsx)(p.A,{defaultMessage:"We will never delete any files from GitHub, only files cached by claude.ai",id:"V7mFrvJBWC"}),children:(0,a.jsx)(u.R,{className:"text-text-400"})})]})})}),t&&(0,a.jsx)("div",{className:"flex items-start align-top min-h-[5rem] gap-2 mb-10 ml-10 text-danger-000",children:(0,a.jsxs)("ul",{className:"text-sm list-disc",children:[(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"File deletion will begin a few minutes after submission.",id:"09chittDG9"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"All files cached from GitHub will be permanently deleted from claude.ai.",id:"F1B0dvW0IP"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"An audit log will be written when deletion has completed.",id:"aNLDY0cpk9"})})]})})]})}},88185:(e,t,n)=>{n.d(t,{K8:()=>x,$F:()=>b,Dx:()=>w,Y5:()=>_,hW:()=>C,Ox:()=>S,c7:()=>A,kV:()=>y});var a=n(98518),s=n(77186),r=n(1761),i=n(27062),l=n(77101),o=n(62942),c=n(7620),u=n(45270),d=n(62370),m=n(43172),p=n(75006);let f=p.z.object({field:p.z.enum(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:p.z.string()}),g=p.z.object({uuid:p.z.string(),name:p.z.string(),oneLiner:p.z.string(),description:p.z.string(),iconUrl:p.z.string().optional(),toolNames:p.z.array(p.z.string()),promptNames:p.z.array(p.z.string()),license:p.z.string().optional(),version:p.z.string().optional(),author:p.z.object({name:p.z.string().optional(),url:p.z.string().optional()}).optional(),documentation:p.z.string().optional(),support:p.z.string().optional(),privacyPolicy:p.z.string().optional(),requiredFields:p.z.array(f).optional()});g.and(p.z.object({type:p.z.enum(["firstParty"]),syncSourceType:p.z.enum([l.v8.GDRIVE,l.v8.GMAIL,l.v8.GCAL,l.v8.SLACK])}));let v=g.and(p.z.object({type:p.z.enum(["remote"]),isAuthless:p.z.boolean()}).and(p.z.union([p.z.object({url:p.z.string(),urlRegex:p.z.undefined()}),p.z.object({url:p.z.undefined(),urlRegex:p.z.string()})])));g.and(p.z.object({type:p.z.enum(["local"]),manifest:m.PX,onDiskPath:p.z.string().optional(),downloadCount:p.z.number().optional(),lifetimeDownloadCount:p.z.number().optional(),isBlocklisted:p.z.boolean().optional(),isInternal:p.z.boolean().optional()}));let h=p.z.array(v),y=e=>{let{isOpen:t,selectedServerId:n}=e,s=(0,c.useRef)(!1),{track:r}=(0,a.st)();(0,c.useEffect)(()=>{t&&(!s.current||n)&&(s.current=!0,r({event_key:"claudeai.mcp.directory.page_view",directory_server_id:n}))},[t,n,r])},x=e=>{let{openModal:t}=e,n=(0,o.useSearchParams)(),a=n.get("directory-open"),s=n.get("directory-uuid");(0,c.useEffect)(()=>{if(a){try{let e=new URL(window.location.href);e.searchParams.delete("directory-open"),e.searchParams.delete("directory-uuid"),window.history.replaceState(null,"",e.pathname+e.search+e.hash)}catch(e){window.history.replaceState(null,"",window.location.pathname+window.location.hash)}t(null!=s?s:void 0)}},[a,s,t])},b=e=>{let{modalIsOpen:t,directoryUuid:n}=e,a=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e;try{e=new URL(window.location.href)}catch(e){return}t?(a.current||(a.current=window.location.pathname),window.history.replaceState(null,"","/directory".concat(n?"/".concat(n):"")+e.search+e.hash)):!t&&a.current&&(window.history.replaceState(null,"",a.current+e.search+e.hash),a.current=null)},[t,n])},j=[{uuid:"8c1b41b4-c060-4704-8c17-95c39fa3511c",name:"Gmail",type:"firstParty",syncSourceType:l.v8.GMAIL,oneLiner:"Draft replies, summarize threads, & search your inbox",description:"Connect Gmail to Claude to quickly find important emails and understand long conversations. Claude can search through your messages, read entire email threads to give you context, and help you stay on top of your inbox. Perfect for finding that message you remember sending, catching up on email chains you missed, or preparing for meetings.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/11088742-using-the-gmail-and-google-calendar-integrations",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"},{uuid:"da761fc3-2821-443c-9734-0b53599fda39",name:"Google Calendar",type:"firstParty",syncSourceType:l.v8.GCAL,oneLiner:"Understand your schedule and optimize your time",description:"Connect Google Calendar to Claude so it can see your schedule, find specific events, and help you prepare for meetings. Claude can search your calendar for events, check your availability, and find free time slots for scheduling. Useful for understanding what’s coming up, preparing for meetings by seeing attendee lists and details, or coordinating schedules when planning new events.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/11088742-using-the-gmail-and-google-calendar-integrations",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"},{uuid:"37fb5d42-ef62-45d4-a12e-66551527a003",name:"Google Drive",type:"firstParty",syncSourceType:l.v8.GDRIVE,oneLiner:"Find and analyze files instantly",description:"Connect Google Drive to Claude so it can search through your documents, read file contents, and help you work with your files. Claude can find specific documents even when you don’t remember the exact name, read and analyze the content of your docs, and convert files to different formats. Useful for finding old project notes, analyzing document content, or pulling information from files scattered across your Drive.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/10166901-using-the-google-drive-integration",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"}],_=()=>{let e=(0,d.Uz)();return{getCorrespondingInstalledServer:t=>{let{url:n,urlRegex:a}=t;if(n)return e.find(e=>e.url===n)||null;if(a){let t=new RegExp(a);return e.find(e=>t.test(e.url||""))||null}return null}}},w=e=>({getCorrespondingDirectoryServer:(0,c.useCallback)(t=>{let{url:n}=t;return n&&e.find(e=>{if("remote"===e.type){if(e.url)return e.url===n;else if(e.urlRegex)return new RegExp(e.urlRegex).test(n)}return!1})||null},[e])}),A=()=>{let e=(0,i.T9)("mcp_directory_servers","servers",[],h);return{status:"success",servers:[...(e=>{var t,n,a;let s=new Set;return(null==(t=e[l.v8.GMAIL])?void 0:t.available)||s.add(l.v8.GMAIL),(null==(n=e[l.v8.GCAL])?void 0:n.available)||s.add(l.v8.GCAL),(null==(a=e[l.v8.GDRIVE])?void 0:a.available)||s.add(l.v8.GDRIVE),j.filter(e=>!s.has(e.syncSourceType))})((0,u.Ou)()),...e].sort((e,t)=>e.name.localeCompare(t.name)),refetch:()=>{}}},C=()=>{let{servers:e}=A(),{getCorrespondingDirectoryServer:t}=w(e.filter(e=>"remote"===e.type));return{isRemoteServerInDirectory:e=>{let{url:n}=e;return!!t({url:n})}}},S=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.YL)(),n=(0,s.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/dxt/extensions"),{headers:{"x-dxt-registry-version":"2"}});return"success"!==n.status?{status:n.status,servers:[],refetch:()=>{n.refetch()}}:{status:n.status,refetch:()=>{n.refetch()},servers:n.data.entries.filter(t=>e||!0!==t.is_blocklisted).map(e=>{var t,n;let a=e.manifest;return{type:"local",uuid:e.id,name:a.display_name||a.name,oneLiner:a.description,description:a.long_description||a.description,iconUrl:e.icon_url||"",toolNames:(null==(t=a.tools)?void 0:t.map(e=>e.name))||[],promptNames:(null==(n=a.prompts)?void 0:n.map(e=>e.name))||[],license:a.license,version:a.version,author:{name:a.author.name,url:a.author.url},documentation:a.documentation,support:a.support,manifest:a,downloadCount:e.download_count,lifetimeDownloadCount:e.lifetime_download_count,isBlocklisted:e.is_blocklisted,isInternal:e.is_internal}}).sort((e,t)=>{var n,a;let s=null!=(n=e.lifetimeDownloadCount)?n:-1;return(null!=(a=t.lifetimeDownloadCount)?a:-1)-s})}}},91926:(e,t,n)=>{n.d(t,{f:()=>i});var a=n(54568),s=n(52198),r=n(32987);let i=(0,n(7620).forwardRef)((e,t)=>{let{checkState:n,onClick:i,label:l,...o}=e,c="partial"===n?s.Hs:s.Jl;return(0,a.jsxs)("div",{className:"p-2 -m-2 flex items-center",onClick:e=>{e.stopPropagation(),i({didCheck:"unchecked"===n})},children:[(0,a.jsx)("button",{ref:t,className:(0,r.A)("rounded p-[0.5px] border-0.5 flex items-center justify-center transition","unchecked"!==n?"bg-accent-secondary-000 border-accent-secondary-200 shadow-sm":"border-border-200 hover:bg-bg-000 hover:shadow-sm"),...o,children:(0,a.jsx)(c,{className:(0,r.A)("text-always-white transition",{invisible:"unchecked"===n}),size:16})}),l&&(0,a.jsx)("span",{className:"ml-2 cursor-pointer",children:l})]})});i.displayName="PartialCheckbox"},92947:(e,t,n)=>{n.d(t,{$V:()=>A,vx:()=>_,kX:()=>w,QD:()=>M,HJ:()=>j,sb:()=>b,BN:()=>S,M8:()=>L,ko:()=>C,AY:()=>N,es:()=>z}),n(98878);var a=n(68096),s=n(7726),r=n(98518),i=n(1761),l=n(65631),o=n(27062),c=n(90119),u=n(62942),d=n(7620),m=n(81527),p=n(20878),f=n(57383),g=n(93770),v=n(21036),h=n(75973),y=n(62370);n(45078);var x=n(91768);let b=()=>{let{value:e}=(0,o.fS)("bagel_enabled");return e},j=()=>{let{value:e}=(0,o.fS)("inline_tool_approval");return e},_=()=>{let{account:e,activeOrganization:t}=(0,i.YL)(),n=(0,i.mV)(),a=(0,l.pG)(e,t,"claude-ai"),s=(0,l.yI)(e,t,l.Nt.IntegrationsManage);return!n||a||s},w=()=>{let e=(0,i.zm)(),t=_();return e&&!t},A="mcp_directory_chin",C=function(){var e,t;let{shouldTrack:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,d.useRef)(!1),s=b(),{dismiss:r}=(0,p.W)(),{account:l}=(0,i.YL)(),o=w(),c=new Date,u="".concat(c.getDate(),"-").concat(c.getMonth(),"-").concat(c.getFullYear()),m="".concat(A,"_").concat(u),f=(null!=(t=null==l||null==(e=l.settings.dismissed_claudeai_banners)?void 0:e.map(e=>e.banner_id))?t:[]).filter(e=>e.includes(A)),g=(0,d.useMemo)(()=>!(!s||o||f.includes(A))&&(!(f.length>3)||!f.includes(m)),[o,s,f,m]);return(0,d.useEffect)(()=>{!a.current&&g&&!f.includes(m)&&n&&(r(m),a.current=!0)},[m,f,n,r,g]),g},S=()=>{var e;let{getMcpToolApprovalRequestSetting:t}=function(){let{value:e}=(0,v.useDynamicConfig)("mcp_tool_approval_config"),t=(0,d.useCallback)((t,n)=>{var a,s,r,i;if(e){if((null==(a=e[t])?void 0:a[n])!==void 0)return e[t][n];if((null==(s=e[t])?void 0:s["*"])!==void 0)return e[t]["*"];if((null==(r=e["*"])?void 0:r[n])!==void 0)return e["*"][n];if((null==(i=e["*"])?void 0:i["*"])!==void 0)return e["*"]["*"]}},[e]);return{toolApprovalConfig:e,getMcpToolApprovalRequestSetting:t}}(),{account:n}=(0,i.YL)(),a=null==n||null==(e=n.settings)?void 0:e.enabled_mcp_tools,s=(0,d.useRef)(a);return(0,d.useEffect)(()=>{s.current=a},[a]),{getApprovalSetting:(0,d.useCallback)((e,n)=>{var a,r;let i=t(null!=e?e:"",null!=(a=null==n?void 0:n.name)?a:""),l=n?(null!=(r=s.current)?r:{})[n.alwaysApprovedKey]:void 0;return"perChat"===i||"always"===i?"always":l?"never":!1===l?"ask":null!=i?i:"ask"},[t])}},M=function(){let{pathname:e,queryString:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,i.YL)(),a=(0,u.usePathname)(),s=(0,u.useSearchParams)(),l=(0,c.V)(),{track:d}=(0,r.st)();(0,o.fS)("claudeai_beam").value;let m="".concat("").concat((0,x.dH)({pathname:e||a,searchParams:s,queryString:t,isClaudeApp:l}));return e=>{let{uuid:t,url:a}=e;d({event_key:"claudeai.mcp.auth.init",uuid:t,url:a}),window.location.href="/api/organizations/".concat(null==n?void 0:n.uuid,"/mcp/start-auth/").concat(t,"?redirect_url=").concat(encodeURIComponent(m),"&open_in_browser=1")}},N=()=>{let e=(0,y.Uz)({type:"local"});return!!(0,c.V)()&&e.length>0},L=()=>{var e,t,n;let a=(0,f.oM)(),s=(null==(e=a.pendingConversationSettings)?void 0:e.compass_mode)==="advanced"||(null==(n=a.conversation)||null==(t=n.conversationSettings)?void 0:t.compass_mode)==="advanced",r=(0,y.Uz)({type:"remote"}).length>0;return s&&r},z=()=>{let e=(0,g.jw)(),{account:t}=(0,i.YL)(),{isInBeam:n,beamConversationSettings:l,setBeamConversationSettings:c}=(0,h.d)(),{projectUuid:u}=(0,f.oM)(),{data:d}=(0,m.xQ)(u),{mutate:p}=(0,m.mu)(u),{value:v}=(0,o.fS)("claude_ai_sticky_project_settings"),{track:y}=(0,r.st)(),{mutate:x}=(0,a.Jy)(),{mutate:b}=(0,s.HF)(null==e?void 0:e.id);return{toggleMcpToolEnabled:(a,s,r)=>{if(!t)return;let i=Array.isArray(a)?a.reduce((e,t)=>({...e,[t]:s}),{}):{[a]:s};if(e){var o;b({settings:{enabled_mcp_tools:{...null==(o=e.conversationSettings)?void 0:o.enabled_mcp_tools,...i}}})}else n&&c&&c({...l,enabled_mcp_tools:{...(null==l?void 0:l.enabled_mcp_tools)||{},...i}});if(u&&v){if(!d)return;p({...d,enabled_mcp_tools:{...(null==d?void 0:d.enabled_mcp_tools)||{},...i}})}else{let e=t.settings.enabled_mcp_tools;x({...t.settings,enabled_mcp_tools:{...e,...i}})}y({event_key:"claudeai.mcp.tool.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:a,value:s,url:r})},toggleMcpToolAlwaysApproved:(e,n)=>{if(!t)return;let a=t.settings.enabled_mcp_tools;x({...t.settings,enabled_mcp_tools:{...a,[e]:n}})}}}}}]);