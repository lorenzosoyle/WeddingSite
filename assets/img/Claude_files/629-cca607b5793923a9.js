try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d99fabee-95e2-47d8-961a-8cf5eaf5772d",e._sentryDebugIdIdentifier="sentry-dbid-d99fabee-95e2-47d8-961a-8cf5eaf5772d")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{6568:(e,t,r)=>{r.d(t,{ED:()=>u,SL:()=>a,fO:()=>o,n2:()=>i,tA:()=>s});var l=r(96784),n=r(7620);let i=e=>2e3*e.document_asset.page_count,a=e=>Math.min(1600,Math.ceil(e.preview_asset.image_width*e.preview_asset.image_height/700)),u=e=>e.reduce((e,t)=>e+a(t),0),o=(e,t,r)=>{let i=(0,l.F)(e),a=(0,n.useMemo)(()=>r.map(e=>e.extracted_content).join(" "),[r]);return i+(0,l.F)(a)+u(t)},s=(e,t)=>e/t>.4},32805:(e,t,r)=>{r.d(t,{i:()=>d});var l=r(54568),n=r(12072),i=r(27261),a=r.n(i),u=r(7620),o=r(62971),s=r(56147);let d=e=>{let t,{children:r,enabledWrapperStyles:i="",disabledWrapperStyles:d=""}=e,c=(0,s.aT)();return t=c?d:i,(0,l.jsx)(n.Tooltip,{tooltipContent:c?(0,l.jsx)(o.A,{defaultMessage:"You have reached the maximum number of projects. <upgradeLink>Upgrade</upgradeLink> for more.",id:"8XKCSUNy79",values:{upgradeLink:e=>(0,l.jsx)(a(),{href:"/upgrade",className:"underline",children:e})}}):null,side:"bottom",children:(0,l.jsx)("div",{className:t,children:u.cloneElement(r,{disabled:c})})})}},33703:(e,t,r)=>{r.d(t,{Fo:()=>s,HP:()=>d,Zi:()=>c});var l=r(77186),n=r(1761),i=r(29585),a=r(71473),u=r(87606),o=r(81527);let s=(e,t)=>{let{account:r,activeOrganization:i}=(0,n.YL)(),s=t===(null==r?void 0:r.uuid),d=null==i?void 0:i.uuid,c=(0,u.useQueryClient)(),p=(0,o.Gz)();return(0,l.L2)(()=>"/api/organizations/".concat(d,"/projects/").concat(e,"/accounts/").concat(t),"PUT",{onSuccess:()=>{c.invalidateQueries({queryKey:[a.vE,{projectUuid:e}]}),s&&(p(e),c.invalidateQueries({queryKey:[a.A2,{orgUUID:d}]}),c.invalidateQueries({queryKey:[a.DC,{orgUUID:d}]}),c.invalidateQueries({queryKey:[a.Ad,{orgUUID:d}]}))}})},d=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:r}=(0,n.YL)(),u=null==r?void 0:r.uuid;return(0,l.Sk)("/api/organizations/".concat(u,"/projects/").concat(e,"/accounts"),{queryKey:[a.vE,{projectUuid:e}],enabled:!!(t&&r&&e),staleTime:0,meta:{noToast:e=>e instanceof i.LG&&403===e.statusCode}})},c=e=>{let{activeOrganization:t}=(0,n.YL)(),r=null==t?void 0:t.uuid,i=(0,u.useQueryClient)();return(0,l.L2)(()=>"/api/organizations/".concat(r,"/projects/").concat(e,"/accounts_bulk"),"POST",{onSuccess(){i.invalidateQueries({queryKey:[a.vE,{projectUuid:e}]})}})}},41932:(e,t,r)=>{r.d(t,{Aw:()=>p,KU:()=>f,MO:()=>o,Rn:()=>s,fh:()=>d,gG:()=>c,uE:()=>v});var l=r(77186),n=r(1761),i=r(29585),a=r(71473),u=r(87606);function o(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:r}=(0,n.YL)(),i=null==r?void 0:r.uuid,{data:u,...o}=(0,l.Sk)("/api/organizations/".concat(i,"/projects/").concat(e,"/docs"),{queryKey:[a.cC,{orgUuid:i,projectUuid:e}],enabled:!!r&&!!e&&t});return{data:null==u?void 0:u.filter(e=>{let{file_name:t,content:r}=e;return t.length>0&&r.length>0}).filter(e=>{let{file_name:t}=e;return"[ANT ONLY] synced_resources.txt"!==t}),unfilteredData:u,...o}}let s=e=>{let{projectUuid:t,docUuid:r}=e,{activeOrganization:u}=(0,n.YL)(),o=null==u?void 0:u.uuid;return(0,l.Sk)("/api/organizations/".concat(o,"/projects/").concat(t,"/docs/").concat(r),{queryKey:[a.Db,{orgUuid:o,projectUuid:t,docUuid:r}],enabled:!!u,staleTime:0,meta:{noToast:e=>e instanceof i.LG&&404===e.statusCode}})};function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:r}=(0,n.YL)(),i=null==r?void 0:r.uuid,o=(0,u.useQueryClient)();return(0,l.L2)(()=>"/api/organizations/".concat(i,"/projects/").concat(e,"/docs"),"POST",{enabled:!!e,onSuccess:function(){for(var r,l=arguments.length,n=Array(l),u=0;u<l;u++)n[u]=arguments[u];o.invalidateQueries({queryKey:[a.cC,{orgUuid:i,projectUuid:e}]}),o.invalidateQueries({queryKey:[a.A2,{orgUUID:i}]}),o.invalidateQueries({queryKey:[a.qz,{orgUuid:i,projectUuid:e}]}),null==(r=t.onSuccess)||r.call(t,...n)},onError:function(){for(var e,r=arguments.length,l=Array(r),n=0;n<r;n++)l[n]=arguments[n];null==(e=t.onError)||e.call(t,...l)}})}function c(e){let{activeOrganization:t}=(0,n.YL)(),r=null==t?void 0:t.uuid,i=(0,u.useQueryClient)();return(0,l.Qv)(t=>"/api/organizations/".concat(r,"/projects/").concat(e,"/docs/").concat(t.docUuid),"DELETE",(e,t)=>t?t.filter(t=>t.uuid!==e.docUuid):t,{queryKey:[a.cC,{orgUuid:r,projectUuid:e}],enabled:!!e,onSuccess:(t,l)=>{i.invalidateQueries({queryKey:[a.Db,{orgUuid:r,projectUuid:e,docUuid:l.docUuid}]}),i.invalidateQueries({queryKey:[a.A2,{orgUUID:r}]}),i.invalidateQueries({queryKey:[a.qz,{orgUuid:r,projectUuid:e}]})},onError:()=>{i.invalidateQueries({queryKey:[a.cC,{orgUuid:r,projectUuid:e}]})}})}let p=e=>{let{activeOrganization:t}=(0,n.YL)(),r=null==t?void 0:t.uuid,i=(0,u.useQueryClient)();return(0,l.Qv)(()=>"/api/organizations/".concat(r,"/projects/").concat(e,"/docs/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.doc_uuids.includes(t.uuid)):t,{queryKey:[a.cC,{orgUuid:r,projectUuid:e}],enabled:!!e,onSuccess:(t,l)=>{for(let t of l.doc_uuids)i.invalidateQueries({queryKey:[a.Db,{orgUuid:r,projectUuid:e,docUuid:t}]});i.invalidateQueries({queryKey:[a.cC,{orgUuid:r,projectUuid:e}]}),i.invalidateQueries({queryKey:[a.A2,{orgUUID:r}]}),i.invalidateQueries({queryKey:[a.qz,{orgUuid:r,projectUuid:e}]})}})};function f(e){let{activeOrganization:t}=(0,n.YL)(),r=null==t?void 0:t.uuid,i=(0,u.useQueryClient)();return(0,l.Qv)(()=>"/api/organizations/".concat(r,"/projects/").concat(e,"/files/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.file_uuids.includes(t.file_uuid)):t,{queryKey:[a.mw,{orgUuid:r,projectUuid:e}],enabled:!!e,onSuccess:()=>{i.invalidateQueries({queryKey:[a.A2,{orgUUID:r}]}),i.invalidateQueries({queryKey:[a.qz,{orgUuid:r,projectUuid:e}]})},onError:()=>{i.invalidateQueries({queryKey:[a.mw,{orgUuid:r,projectUuid:e}]})}})}function v(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:r}=(0,n.YL)(),i=null==r?void 0:r.uuid;return(0,l.Sk)("/api/organizations/".concat(i,"/projects/").concat(e,"/files"),{queryKey:[a.mw,{orgUuid:i,projectUuid:e}],enabled:!!r&&!!e&&t})}},56147:(e,t,r)=>{r.d(t,{AO:()=>E,AV:()=>A,ED:()=>K,IE:()=>D,Pb:()=>C,RP:()=>q,aT:()=>U,gq:()=>Q,pb:()=>T,ti:()=>M});var l=r(64683),n=r(16253),i=r(85644),a=r(96784),u=r(1761),o=r(55554),s=r(46612),d=r(71473),c=r(27062),p=r(77101),f=r(85544),v=r(87606),m=r(7620),g=r(75006),y=r(98251),h=r(33703),b=r(41932),_=r(52909),x=r(81527),j=r(6568),w=r(80731);let L={hardLimit:1e5},z={default:{max:L,raven:L,pro:L,free:L}},S=g.z.object({hardLimit:g.z.number().optional(),tokensPerImage:g.z.number().optional()}),k=g.z.object({free:S.optional(),pro:S.optional(),raven:S.optional(),max:S.optional()}),q=g.z.record(k.optional()),U=()=>{let{data:e}=(0,x.PL)(),t=(0,w.p)();return void 0!==t&&void 0!==e&&e.count>=t},A=()=>{let{value:e}=(0,c.fS)("claude_ai_project_bananagrams");return e},C=e=>{let t=A(),{data:r}=(0,y.fR)(e,t);return!!t&&(void 0!==r?!!(t&&r.use_project_knowledge_search):void 0)},E=()=>{let e=(0,u.mV)(),t=(0,u.O9)(),r=(0,u.zc)(),{selectedTier:l,shouldOverrideTokenLimits:n,isTierSelectorEnabled:a}=(0,o.t)(),s=a&&n&&!!l,d=(0,c.T9)("console_default_model","model",null,c.Lu),{activeModelOptions:p}=(0,i.A9)(),v=p.map(e=>e.model),m=(0,c.iW)("hatch_token_limits",z,q),g=A(),y=(0,c.T9)("project_knowledge_limit","limit",0x3200000,c.T2);if(g)return{maxKbTokens:y,modelWithLargestContext:null};let h=null,b=-1/0;for(let n of Object.keys(m)){var _,x,j,w,L,S,k,U,C,E,K,Q,T,M,D,I;let i,a;if(!v.includes(n)&&"default"!==n)continue;let u=m[n];(s?l===f.d7.MAX:r)?(i=null!=(j=null==u||null==(_=u.max)?void 0:_.hardLimit)?j:19e4,a=null!=(w=null==u||null==(x=u.max)?void 0:x.output)?w:8192):(s?l===f.d7.ENTERPRISE:e)?(i=null!=(k=null==u||null==(L=u.raven)?void 0:L.hardLimit)?k:19e4,a=null!=(U=null==u||null==(S=u.raven)?void 0:S.output)?U:8192):(s?l===f.d7.PRO:t)?(i=null!=(K=null==u||null==(C=u.pro)?void 0:C.hardLimit)?K:19e4,a=null!=(Q=null==u||null==(E=u.pro)?void 0:E.output)?Q:8192):(i=null!=(D=null==u||null==(T=u.free)?void 0:T.hardLimit)?D:25e3,a=null!=(I=null==u||null==(M=u.free)?void 0:M.output)?I:8192),(i=Math.round(.9*i)-a)>b?(h="default"===n?d:n,b=i):i===b&&"default"===n&&(h=d)}return{maxKbTokens:b,modelWithLargestContext:h}},K=e=>{let t=A(),{data:r,isLoading:l}=(0,b.MO)(e,!1===t),{data:n,isLoading:i}=(0,_.CO)(e,!0,!1===t),{data:u,isLoading:o}=(0,b.uE)(e,!1===t),{data:d,isLoading:c}=(0,y.fR)(e,t),f=null==u?void 0:u.filter(e=>"document"===e.file_kind),v=(0,m.useMemo)(()=>{var e;return null!=(e=null==f?void 0:f.reduce((e,t)=>e+(0,j.n2)(t),0))?e:0},[f]),g=null==u?void 0:u.filter(e=>"image"===e.file_kind),h=(0,m.useMemo)(()=>{var e;return null!=(e=null==g?void 0:g.reduce((e,t)=>e+(0,j.SL)(t),0))?e:0},[g]),x=(0,m.useMemo)(()=>(r||[]).map(e=>e.content).join(" "),[r]),w=(0,a.F)(x,{skip:null==t||t})+v+h,L=(0,m.useMemo)(()=>{var e,t;let r=null==n?void 0:n.filter(e=>e.type===p.v8.GITHUB),l=null==n?void 0:n.filter(e=>e.type!==p.v8.GITHUB),i=null!=(e=null==r?void 0:r.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))?e:0,a=null!=(t=null==l?void 0:l.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))?t:0;return Math.floor(i/s.Pu+a/s.t2)},[n]);if(!l&&!i&&!o&&!c){if(t){var z;return null!=(z=null==d?void 0:d.knowledge_size)?z:0}return void 0!==r?void 0!==n?w+L:w:void 0!==n?L:void 0}},Q=e=>{let t=A(),{data:r}=(0,y.fR)(e,t);if(r)return r.project_knowledge_search_threshold},T=e=>{let{mutate:t}=(0,x.sS)(e),{data:r}=(0,x.fo)(e);return()=>{t({is_starred:!(null==r?void 0:r.is_starred)})}},M=e=>{var t;let{projectUuid:r}=e,{account:l}=(0,u.YL)(),{data:n}=(0,x.fo)(r),{data:i}=(0,h.HP)(r),a=(null==i||null==(t=i.find(e=>e.account.uuid===(null==l?void 0:l.uuid)))?void 0:t.role)||"none",o=(null==n?void 0:n.creator.uuid)===(null==l?void 0:l.uuid),s=(null==i?void 0:i.some(e=>"none"!==e.role&&e.account.uuid!==(null==n?void 0:n.creator.uuid)))||(null==n?void 0:n.is_private)===!1,d=!(null==n?void 0:n.is_private)&&(null==n?void 0:n.organization_role)==="user",c=!(null==n?void 0:n.is_private)&&(null==n?void 0:n.organization_role)==="user";return{isCreator:o,isProjectShared:s,hasKBEditPermissions:"user"===a||d,canManageMembers:"user"===a||c}};function D(e){let{projectUuid:t,onError:r,onSuccess:i}=e,{activeOrganization:a}=(0,u.YL)(),o=null==a?void 0:a.uuid,s=(0,v.useQueryClient)(),{mutateAsync:p}=(0,b.fh)(t),f=(0,m.useCallback)(async(e,r)=>{for(let t of e)await p({file_name:t.file_name,content:t.extracted_content});r.length&&s.invalidateQueries({queryKey:[d.mw,{orgUuid:o,projectUuid:t}]}),null==i||i()},[p,o,t,s,i]),g=(0,n.cV)(),y=(0,l.i1)(),{value:h}=(0,c.fS)("project_janus"),{value:_}=(0,c.fS)("project_image"),{handleUpload:x}=(0,l.vV)({imagesEnabled:_,blobFileUploadsEnabled:g,rasterizePdfUploadsEnabled:y&&h,wiggleEnabled:!1,onUploadComplete:f,onError:r,projectUuid:t});return{handleProjectFileUpload:x}}},60629:(e,t,r)=>{r.d(t,{BU:()=>x,AI:()=>y});var l=r(54568),n=r(98518),i=r(1761),a=r(27062),u=r(62942),o=r(62971),s=r(75006),d=r(81527),c=r(32987),p=r(61773);r(7620);var f=r(32805);let v=e=>{let{icon:t,title:r,description:n,onClick:i,variant:a,disabled:u=!1}=e;return(0,l.jsxs)("button",{className:(0,c.A)("flex p-4 w-full items-center h-full","projects"===a?"flex-row-reverse sm:flex-col sm:items-start lg:flex-row-reverse lg:items-center":"flex-row sm:flex-col sm:items-start"),onClick:i,disabled:u,children:[(0,l.jsx)("div",{className:(0,c.A)("relative mb-1","projects"===a?"lg:mb-0 lg:ml-2":"mr-2"),children:(0,l.jsx)(p.default,{src:t,height:50,width:50,alt:"",style:{opacity:u?"50%":"100%"}})}),(0,l.jsxs)("div",{className:"flex flex-col items-start w-full h-full",children:[(0,l.jsx)("h3",{className:(0,c.A)("text-md font-medium text-text-200 text-left",u&&"text-text-500"),children:r}),(0,l.jsx)("p",{className:(0,c.A)("text-sm text-text-200 text-left",u&&"text-text-500"),children:n})]})]})},m=e=>{let{variant:t="home",...r}=e;return(0,l.jsx)("div",{className:(0,c.A)("w-full","projects"===t?"sm:w-48 sm:grow lg:w-52":"sm:w-48 lg:w-52"),children:(0,l.jsx)(f.i,{enabledWrapperStyles:"from-bg-100 to-bg-100/30 border-0.5 border-border-300 hover:from-bg-000/70 hover:to-bg-000/50 hover:border-border-300/30 text-text-200 hover:text-text-100 relative flex cursor-pointer flex-col gap-1.5 rounded-xl bg-gradient-to-b transition-all ease-in-out hover:shadow-sm active:scale-[0.995] md:gap-2 overflow-hidden h-full",disabledWrapperStyles:"border-0.5 border-border-300 text-text-200 relative flex cursor-pointer flex-col gap-1.5 rounded-xl md:gap-2 overflow-hidden h-full",children:(0,l.jsx)(v,{...r,variant:t})})})},g=s.z.object({type:s.z.nativeEnum(d.gM),subtype:s.z.nativeEnum(d.gr),icon_type:s.z.string(),custom_instructions:s.z.string()}),y=()=>{let e=(0,u.useSearchParams)().get("projectStarter"),t=_();return e?t.options.find(t=>t.id===e):void 0},h=s.z.array(g),b=[],_=()=>{let e=(0,i.hT)(),t=(0,a.T9)("claude_ai_experience","project_templates",b,h);return{sectionTitle:e?(0,l.jsx)(o.A,{defaultMessage:"Set up Claude for your classes, career, and research",id:"aU/3NrmiTd"}):"",options:t.map(e=>({id:"".concat(e.type,"-").concat(e.subtype),type:e.type,subtype:e.subtype,icon:(e=>{switch(e){case"edu_lightbulb":return"/images/illustrations/edu/edu-lightbulb.svg";case"edu_paper_and_quill":return"/images/illustrations/edu/edu-paper-and-quill.svg";case"edu_paper_and_magnifying_glass":return"/images/illustrations/edu/edu-paper-and-magnifying-glass.svg";default:return""}})(e.icon_type),title:((e,t)=>{if(e===d.gM.Student)switch(t){case d.gr.Study:return(0,l.jsx)(o.A,{defaultMessage:"Study project",id:"SDlohOAVzo"});case d.gr.Career:return(0,l.jsx)(o.A,{defaultMessage:"Career project",id:"MsM+7biLzH"});case d.gr.Research:return(0,l.jsx)(o.A,{defaultMessage:"Research project",id:"OR/ar3drnQ"})}})(e.type,e.subtype),description:((e,t)=>{if(e===d.gM.Student)switch(t){case d.gr.Study:return(0,l.jsx)(o.A,{defaultMessage:"Learn and master any subject",id:"3vYdF/hF/f"});case d.gr.Career:return(0,l.jsx)(o.A,{defaultMessage:"Find the next step for your career",id:"v6qrZ8g/Vy"});case d.gr.Research:return(0,l.jsx)(o.A,{defaultMessage:"Analyze and organize research",id:"R19a/TH47z"})}})(e.type,e.subtype),customInstructions:e.custom_instructions}))}},x=e=>{let{variant:t="home"}=e,r=(0,u.useRouter)(),i=(0,n.st)(),a=_();if(a.options.length)return(0,l.jsxs)("div",{className:"w-full mb-6",children:[(0,l.jsx)("h2",{className:"text-sm text-text-200 font-medium leading-6 ml-1",children:a.sectionTitle}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 w-full mt-3 justify-center items-stretch",children:a.options.map(e=>(0,l.jsx)(m,{variant:t,icon:e.icon,title:e.title,description:e.description,onClick:()=>{i.track({event_key:"claudeai.projects.project_starter.clicked",project_type:e.type,project_subtype:e.subtype,path:window.location.pathname}),r.push("/projects/create?projectStarter="+e.id)}},e.id))})]})}},96784:(e,t,r)=>{r.d(t,{F:()=>i});var l=r(46612),n=r(7620);function i(e){let{skip:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[i,a]=(0,n.useState)(e.length/l.t2*.8),u=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!t){if(!u.current){if("undefined"==typeof Worker)return;try{let e=new Worker(r.tu(new URL(r.p+r.u(3572),r.b)));e.onmessage=e=>a(e.data),u.current=e}catch(t){var e;throw(null==t||null==(e=t.toString)?void 0:e.call(t).includes("Invalid URL"))&&console.error("useTokenCounter invalid URL error hit; baseUrl = ‘".concat("file:///app/packages/chat/utils/useTokenCounter.tsx","’")),t}}return()=>{var e;null==(e=u.current)||e.terminate(),u.current=null}}},[t]),(0,n.useEffect)(()=>{u.current&&u.current.postMessage(e)},[e]),i}}}]);